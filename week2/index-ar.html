<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مذكرة الفصلين 2 و 3 | CYB 236</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+Arabic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-50: #ecfdf5;
            --primary-100: #d1fae5;
            --primary-200: #a7f3d0;
            --primary-300: #6ee7b7;
            --primary-400: #34d399;
            --primary-500: #10b981;
            --primary-600: #059669;
            --primary-700: #047857;
            --primary-800: #065f46;
            --primary-900: #064e3b;

            --neutral-50: #fafafa;
            --neutral-100: #f5f5f5;
            --neutral-200: #e5e5e5;
            --neutral-300: #d4d4d4;
            --neutral-400: #a3a3a3;
            --neutral-500: #737373;
            --neutral-600: #525252;
            --neutral-700: #404040;
            --neutral-800: #262626;
            --neutral-900: #171717;

            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;

            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

            --ch2: #7c3aed;
            --ch2-light: #ede9fe;
            --ch2-mid: #c4b5fd;
            --ch3: #0369a1;
            --ch3-light: #e0f2fe;
            --ch3-mid: #7dd3fc;
            --dark: var(--neutral-900);
            --dark2: var(--neutral-800);
            --gray: var(--neutral-500);
            --text: var(--neutral-700);
            --light: var(--neutral-50);
            --border: var(--neutral-200);
            --green: #16a34a;
            --green-light: #f0fdf4;
            --orange: #ea580c;
            --orange-light: #fff7ed;
            --red: #dc2626;
            --red-light: #fef2f2;
            --get: #22c55e;
            --post: #3b82f6;
            --put: #f59e0b;
            --delete: #ef4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans Arabic', 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.9;
            color: var(--text);
            background: var(--light);
            font-size: 16px;
            direction: rtl;
        }

        /* Technical terms in English */
        .term {
            font-family: 'Plus Jakarta Sans', sans-serif;
            direction: ltr;
            display: inline-block;
            background: var(--primary-50);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: var(--primary-700);
        }

        /* ───── Top Navigation (Week 1 style) ───── */
        .top-nav {
            background: white;
            border-bottom: 1px solid var(--neutral-200);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .top-nav-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--neutral-800);
        }

        .nav-brand-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        .nav-brand-text {
            font-weight: 600;
            font-size: 15px;
        }

        .nav-links {
            display: flex;
            gap: 8px;
        }

        .nav-link {
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            color: var(--neutral-600);
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: var(--neutral-100);
            color: var(--neutral-800);
        }

        .nav-link.active {
            background: var(--primary-50);
            color: var(--primary-700);
        }

        .lang-switch {
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            background: var(--neutral-100);
            color: var(--neutral-700);
            font-weight: 600;
            font-size: 13px;
            transition: all 0.2s;
            margin-right: 16px;
        }

        .lang-switch:hover {
            background: var(--neutral-200);
        }

        /* ───── Cover ───── */
        .cover {
            background: linear-gradient(135deg, var(--primary-800) 0%, var(--primary-900) 100%);
            color: white;
            padding: 80px 40px;
            position: relative;
            overflow: hidden;
        }

        .cover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .cover-inner {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .cover-breadcrumb {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .cover-breadcrumb a {
            color: var(--primary-200);
            text-decoration: none;
        }

        .cover-breadcrumb span {
            color: var(--primary-300);
        }

        .cover-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 100px;
            font-size: 13px;
            font-weight: 600;
            color: var(--primary-100);
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .cover-badge-dot {
            width: 8px;
            height: 8px;
            background: var(--primary-400);
            border-radius: 50%;
        }

        .cover h1 {
            font-size: 48px;
            font-weight: 800;
            position: relative;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
            line-height: 1.1;
        }

        .cover .sub {
            font-size: 20px;
            color: var(--primary-200);
            position: relative;
            margin-bottom: 30px;
        }

        .cover-chips {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
        }

        .cover-chip {
            padding: 10px 24px;
            border-radius: 14px;
            font-weight: 700;
            font-size: 0.95em;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(4px);
        }

        .cover-chip.ch2 { background: rgba(124,58,237,0.3); }
        .cover-chip.ch3 { background: rgba(3,105,161,0.3); }

        /* ───── Container ───── */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 32px;
            align-items: start;
        }

        .sidebar {
            position: sticky;
            top: 86px;
            height: fit-content;
        }

        .sidebar-card {
            background: white;
            border-radius: 16px;
            border: 1px solid var(--neutral-200);
            overflow: hidden;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--neutral-200);
        }

        .sidebar-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--neutral-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .sidebar-nav {
            padding: 12px;
            max-height: calc(100vh - 160px);
            overflow: auto;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 10px;
            text-decoration: none;
            color: var(--neutral-600);
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
            margin-bottom: 4px;
            line-height: 1.35;
        }

        .sidebar-link:hover {
            background: var(--neutral-100);
            color: var(--neutral-800);
        }

        .sidebar-link.active {
            background: var(--primary-50);
            color: var(--primary-700);
        }

        .sidebar-link-number {
            width: 28px;
            height: 28px;
            background: var(--neutral-100);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            color: var(--neutral-500);
            flex-shrink: 0;
        }

        .sidebar-link.active .sidebar-link-number {
            background: var(--primary-600);
            color: white;
        }

        .content {
            min-width: 0;
        }

        /* ───── Chapter Header ───── */
        .chapter-header {
            padding: 8px 0 30px;
            text-align: center;
        }

        .chapter-num {
            display: inline-block;
            font-size: 0.85em;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            padding: 6px 20px;
            border-radius: 999px;
            margin-bottom: 14px;
        }

        .chapter-num.ch2 { background: var(--ch2-light); color: var(--ch2); }
        .chapter-num.ch3 { background: var(--ch3-light); color: var(--ch3); }

        .chapter-title {
            font-size: 2.2em;
            font-weight: 800;
            color: var(--dark);
            letter-spacing: -0.02em;
        }

        .chapter-divider {
            height: 4px;
            border-radius: 2px;
            margin: 10px auto 0;
            width: 80px;
        }

        .chapter-divider.ch2 { background: var(--ch2); }
        .chapter-divider.ch3 { background: var(--ch3); }

        /* ───── Sections ───── */
        .topic {
            margin-bottom: 32px;
            background: white;
            border-radius: 20px;
            border: 1px solid var(--neutral-200);
            padding: 34px;
        }

        .objectives-grid {
            display: grid;
            gap: 16px;
        }

        .objective-card {
            display: flex;
            gap: 16px;
            padding: 20px;
            background: var(--neutral-50);
            border-radius: 12px;
            border: 1px solid var(--neutral-200);
        }

        .objective-number {
            width: 40px;
            height: 40px;
            background: var(--primary-600);
            color: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
        }

        .objective-text {
            color: var(--neutral-700);
            font-size: 15px;
            line-height: 1.6;
        }

        .topic-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 24px;
            padding-bottom: 18px;
            border-bottom: 2px solid var(--neutral-100);
        }

        .topic-icon {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            flex-shrink: 0;
        }

        .topic-icon.ch2 { background: var(--ch2-light); }
        .topic-icon.ch3 { background: var(--ch3-light); }

        h2 { font-size: 1.55em; font-weight: 700; color: var(--dark); }
        h3 { font-size: 1.2em; color: var(--dark2); margin: 24px 0 10px; }
        p { margin-bottom: 14px; font-size: 1.02em; }
        strong { color: var(--dark); }

        /* ───── Story Box ───── */
        .story {
            background: var(--neutral-50);
            border-radius: 18px;
            padding: 28px 30px;
            margin: 24px 0;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--neutral-200);
            border-right: 5px solid;
            border-left: none;
        }

        .story.ch2 { border-color: var(--ch2); }
        .story.ch3 { border-color: var(--ch3); }

        .story-label {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
            padding: 4px 14px;
            border-radius: 8px;
        }

        .story-label.ch2 { background: var(--ch2-light); color: var(--ch2); }
        .story-label.ch3 { background: var(--ch3-light); color: var(--ch3); }

        .story p { margin-bottom: 10px; }
        .story p:last-child { margin-bottom: 0; }

        .dialogue {
            background: white;
            border-radius: 10px;
            padding: 12px 18px;
            margin: 10px 0;
            font-style: italic;
            color: var(--dark2);
            border: 1px solid var(--neutral-200);
            border-right: 3px solid var(--border);
            border-left: none;
        }

        .character { font-weight: 700; font-style: normal; }
        .character.ahmed { color: var(--ch2); }
        .character.omar { color: var(--ch3); }

        /* ───── Key Point ───── */
        .key-point {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-right: 5px solid var(--green);
            border-left: none;
            border-radius: 14px 0 0 14px;
            padding: 20px 24px;
            margin: 20px 0;
        }

        .key-point h4 { color: var(--green); margin-bottom: 6px; font-size: 1em; }
        .key-point p { margin-bottom: 0; font-size: 1em; }

        /* ───── Warning ───── */
        .warning {
            background: linear-gradient(135deg, var(--red-light), #fecaca);
            border-right: 5px solid var(--red);
            border-left: none;
            border-radius: 14px 0 0 14px;
            padding: 20px 24px;
            margin: 20px 0;
        }

        .warning h4 { color: var(--red); margin-bottom: 6px; font-size: 1em; }
        .warning p { margin-bottom: 0; font-size: 1em; }

        /* ───── Clean List ───── */
        .clean-list {
            list-style: none;
            padding: 0;
            margin: 16px 0;
        }

        .clean-list li {
            padding: 10px 36px 10px 0;
            position: relative;
            border-bottom: 1px solid var(--border);
            font-size: 1.02em;
        }

        .clean-list li:last-child { border-bottom: none; }

        .clean-list li::before {
            content: '';
            position: absolute;
            right: 0;
            top: 14px;
            width: 20px;
            height: 20px;
            border-radius: 6px;
        }

        .clean-list.ch2 li::before { background: var(--ch2-light); }
        .clean-list.ch3 li::before { background: var(--ch3-light); }

        /* ───── Mapping Cards ───── */
        .map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 14px;
            margin: 20px 0;
        }

        .map-card {
            background: var(--neutral-50);
            border-radius: 14px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
            transition: transform 0.2s;
        }

        .map-card:hover { transform: translateY(-3px); }
        .map-card .mc-icon { font-size: 2em; margin-bottom: 8px; }
        .map-card .mc-title { font-weight: 700; color: var(--dark); font-size: 0.95em; margin-bottom: 4px; }
        .map-card .mc-desc { color: var(--gray); font-size: 0.85em; }

        /* ───── Compare Grid ───── */
        .compare-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 24px 0;
        }

        .compare-card {
            background: var(--neutral-50);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-sm);
            border-top: 4px solid;
            transition: transform 0.2s;
        }

        .compare-card:hover { transform: translateY(-3px); }
        .compare-card h4 { margin-bottom: 8px; font-size: 1.1em; }
        .compare-card p { font-size: 0.95em; margin-bottom: 0; }

        /* ───── API Bridge Visual ───── */
        .api-bridge {
            background: white;
            border-radius: 20px;
            padding: 28px;
            margin: 24px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
        }

        .api-bridge-row {
            display: flex;
            align-items: stretch;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .api-bridge-node {
            flex: 1;
            min-width: 200px;
            max-width: 280px;
            background: var(--neutral-50);
            border: 1px solid var(--neutral-200);
            border-radius: 14px;
            padding: 16px;
            text-align: center;
        }

        .api-bridge-node .n-icon {
            font-size: 2.1em;
            margin-bottom: 8px;
        }

        .api-bridge-node .n-title {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 4px;
        }

        .api-bridge-node .n-desc {
            font-size: 0.9em;
            color: var(--gray);
            line-height: 1.5;
        }

        .api-bridge-arrow {
            align-self: center;
            font-size: 1.6em;
            color: var(--ch3-mid);
            font-weight: 700;
        }

        /* ───── Badge ───── */
        .badge {
            display: inline-block;
            padding: 3px 12px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.85em;
            color: white;
        }

        .badge.get { background: var(--get); }
        .badge.post { background: var(--post); }
        .badge.put { background: var(--put); }
        .badge.delete { background: var(--delete); }

        /* ───── Method Table ───── */
        .method-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 6px;
            margin: 20px 0;
        }

        .method-table th {
            text-align: right;
            padding: 10px 16px;
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--gray);
        }

        .method-table td {
            padding: 14px 16px;
            background: white;
            font-size: 0.98em;
        }

        .method-table tr td:first-child { border-radius: 0 10px 10px 0; }
        .method-table tr td:last-child { border-radius: 10px 0 0 10px; }
        .method-table tbody tr { box-shadow: 0 1px 4px rgba(0,0,0,0.04); }

        /* ───── JSON Box ───── */
        .json-box {
            background: #0f172a;
            border-radius: 14px;
            padding: 24px;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.92em;
            line-height: 1.9;
            color: #e2e8f0;
            overflow-x: auto;
        }

        .json-box .k { color: #93c5fd; }
        .json-box .s { color: #86efac; }
        .json-box .n { color: #fbbf24; }
        .json-box .c { color: #64748b; font-style: italic; }

        /* ───── Summary Banner ───── */
        .summary-banner {
            border-radius: 18px;
            padding: 30px;
            margin: 30px 0;
            color: white;
        }

        .summary-banner.ch2 { background: linear-gradient(135deg, #5b21b6, #7c3aed); }
        .summary-banner.ch3 { background: linear-gradient(135deg, #075985, #0369a1); }

        .summary-banner h3 { color: white; font-size: 1.3em; margin-bottom: 14px; }

        .summary-banner ul { list-style: none; padding: 0; }

        .summary-banner li {
            padding: 8px 28px 8px 0;
            position: relative;
            opacity: 0.95;
            font-size: 1.02em;
        }

        .summary-banner li::before {
            content: '\2713';
            position: absolute;
            right: 0;
            font-weight: 700;
        }

        /* ───── Page Break ───── */
        .page-break {
            height: 6px;
            background: linear-gradient(90deg, var(--ch2), var(--ch3));
            margin: 60px 0;
            border-radius: 3px;
        }

        /* ───── Footer ───── */
        .footer {
            background: var(--neutral-900);
            color: white;
            padding: 48px 40px;
            margin-top: 20px;
        }

        .footer-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .footer-brand {
            font-weight: 700;
            font-size: 18px;
        }

        .footer-links {
            display: flex;
            gap: 24px;
        }

        .footer-links a {
            color: var(--neutral-400);
            text-decoration: none;
            font-size: 14px;
        }

        .footer-links a:hover {
            color: white;
        }

        /* ═══════════════════════════════════════════
           ANIMATIONS & VISUALIZATIONS
           ═══════════════════════════════════════════ */

        /* ── Recon Steps Animation ── */
        .recon-animation {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
            overflow: hidden;
        }

        .recon-steps-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            flex-wrap: wrap;
            position: relative;
        }

        .recon-step-node {
            text-align: center;
            padding: 18px;
            opacity: 0;
            animation: stepAppear 0.6s ease forwards;
        }

        .recon-step-node:nth-child(1) { animation-delay: 0.2s; }
        .recon-step-node:nth-child(3) { animation-delay: 0.8s; }
        .recon-step-node:nth-child(5) { animation-delay: 1.4s; }
        .recon-step-node:nth-child(7) { animation-delay: 2.0s; }

        @keyframes stepAppear {
            from { opacity: 0; transform: translateY(20px) scale(0.8); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .recon-step-icon {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            margin: 0 auto 8px;
            position: relative;
        }

        .recon-step-icon.s1 { background: #ede9fe; }
        .recon-step-icon.s2 { background: #e0f2fe; }
        .recon-step-icon.s3 { background: #fef3c7; }
        .recon-step-icon.s4 { background: #dcfce7; }

        .recon-step-icon::after {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            border: 2px dashed;
            opacity: 0.3;
            animation: spinSlow 12s linear infinite;
        }

        .recon-step-icon.s1::after { border-color: var(--ch2); }
        .recon-step-icon.s2::after { border-color: var(--ch3); }
        .recon-step-icon.s3::after { border-color: var(--put); }
        .recon-step-icon.s4::after { border-color: var(--green); }

        @keyframes spinSlow {
            to { transform: rotate(360deg); }
        }

        .recon-step-label {
            font-weight: 700;
            font-size: 0.9em;
            color: var(--dark);
        }

        .recon-step-sub {
            font-size: 0.8em;
            color: var(--gray);
        }

        .recon-arrow {
            font-size: 1.6em;
            color: var(--ch2-mid);
            opacity: 0;
            animation: arrowFade 0.4s ease forwards;
        }

        .recon-arrow:nth-child(2) { animation-delay: 0.5s; }
        .recon-arrow:nth-child(4) { animation-delay: 1.1s; }
        .recon-arrow:nth-child(6) { animation-delay: 1.7s; }

        @keyframes arrowFade {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* ── Role-Based Access Visual ── */
        .access-visual {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
        }

        .access-levels {
            display: flex;
            flex-direction: column;
            gap: 14px;
            max-width: 700px;
            margin: 0 auto;
        }

        .access-bar {
            border-radius: 14px;
            padding: 18px 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            color: white;
            position: relative;
            overflow: hidden;
            animation: barGrow 0.8s ease forwards;
            transform-origin: left;
        }

        .access-bar:nth-child(1) { animation-delay: 0.2s; }
        .access-bar:nth-child(2) { animation-delay: 0.5s; }
        .access-bar:nth-child(3) { animation-delay: 0.8s; }

        @keyframes barGrow {
            from { transform: scaleX(0); opacity: 0; }
            to { transform: scaleX(1); opacity: 1; }
        }

        .access-bar.admin {
            background: linear-gradient(90deg, #dc2626, #f87171);
        }

        .access-bar.employee {
            background: linear-gradient(90deg, var(--put), #fbbf24);
            width: 75%;
        }

        .access-bar.customer {
            background: linear-gradient(90deg, var(--green), #4ade80);
            width: 45%;
        }

        .access-bar-emoji { font-size: 1.6em; }

        .access-bar-text strong {
            color: white;
            display: block;
            font-size: 1em;
        }

        .access-bar-text span {
            font-size: 0.85em;
            opacity: 0.9;
        }

        /* ── Animated Client-Server Flow ── */
        .flow-visual {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
            position: relative;
            overflow: hidden;
        }

        .flow-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
        }

        .flow-box {
            text-align: center;
            z-index: 2;
            padding: 10px 20px;
        }

        .flow-emoji {
            font-size: 3em;
            animation: floatUpDown 3s ease-in-out infinite;
        }

        .flow-box:nth-child(3) .flow-emoji { animation-delay: 0.4s; }
        .flow-box:nth-child(5) .flow-emoji { animation-delay: 0.8s; }

        @keyframes floatUpDown {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .flow-name { font-weight: 700; color: var(--dark); font-size: 1em; margin-top: 6px; }
        .flow-sub { color: var(--gray); font-size: 0.82em; }

        .flow-pipe {
            width: 120px;
            height: 50px;
            position: relative;
            z-index: 1;
        }

        .flow-pipe .pipe-line {
            position: absolute;
            width: 100%;
            height: 3px;
            border-radius: 2px;
        }

        .flow-pipe .pipe-line.top { top: 12px; background: var(--post); opacity: 0.25; }
        .flow-pipe .pipe-line.bot { top: 35px; background: var(--green); opacity: 0.25; }

        .flow-pipe .dot {
            position: absolute;
            width: 14px;
            height: 14px;
            border-radius: 50%;
        }

        .flow-pipe .dot.req {
            background: var(--post);
            top: 6px;
            animation: dotRight 2s ease-in-out infinite;
            box-shadow: 0 0 8px rgba(59,130,246,0.5);
        }

        .flow-pipe .dot.res {
            background: var(--green);
            top: 29px;
            animation: dotLeft 2s ease-in-out infinite;
            animation-delay: 1s;
            box-shadow: 0 0 8px rgba(34,197,94,0.5);
        }

        @keyframes dotRight {
            0% { left: 0; opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { left: calc(100% - 14px); opacity: 0; }
        }

        @keyframes dotLeft {
            0% { left: calc(100% - 14px); opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { left: 0; opacity: 0; }
        }

        .flow-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            font-size: 0.85em;
            color: var(--gray);
        }

        .flow-legend span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }

        .legend-dot.req { background: var(--post); }
        .legend-dot.res { background: var(--green); }

        /* ── HTTP Methods Interactive Demo ── */
        .http-demo {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
        }

        .http-tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .http-tab {
            padding: 10px 22px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.95em;
            transition: all 0.25s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .http-tab:hover { transform: translateY(-2px); }
        .http-tab.active { color: white; }

        .http-tab[data-m="get"].active { background: var(--get); border-color: var(--get); }
        .http-tab[data-m="post"].active { background: var(--post); border-color: var(--post); }
        .http-tab[data-m="put"].active { background: var(--put); border-color: var(--put); }
        .http-tab[data-m="delete"].active { background: var(--delete); border-color: var(--delete); }

        .http-scene { display: none; animation: sceneIn 0.4s ease; }
        .http-scene.active { display: block; }

        @keyframes sceneIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .scene-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding: 14px 20px;
            border-radius: 12px;
            font-family: 'Consolas', monospace;
            font-size: 1em;
            color: white;
        }

        .scene-header.get { background: var(--get); }
        .scene-header.post { background: var(--post); }
        .scene-header.put { background: var(--put); }
        .scene-header.delete { background: var(--delete); }

        .scene-body {
            display: grid;
            grid-template-columns: 1fr 60px 1fr;
            gap: 0;
            align-items: start;
            min-height: 200px;
        }

        .scene-col {
            padding: 20px;
        }

        .scene-col-label {
            font-size: 0.75em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--gray);
            margin-bottom: 12px;
        }

        .scene-arrow-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-top: 40px;
            gap: 10px;
        }

        .scene-arrow-animated {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            animation: arrowBounce 1.5s ease-in-out infinite;
        }

        .scene-arrow-animated.to-server {
            background: #eff6ff;
            color: var(--post);
        }

        .scene-arrow-animated.to-client {
            background: #f0fdf4;
            color: var(--green);
            animation-delay: 0.5s;
        }

        @keyframes arrowBounce {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(6px); }
        }

        .scene-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--border);
        }

        .scene-card .scene-emoji {
            font-size: 2em;
            margin-bottom: 8px;
        }

        /* ── Technology Stack Animation ── */
        .stack-visual {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
        }

        .stack-tower {
            display: flex;
            flex-direction: column-reverse;
            gap: 0;
            max-width: 600px;
            margin: 0 auto;
        }

        .stack-layer {
            padding: 18px 24px;
            display: flex;
            align-items: center;
            gap: 14px;
            color: white;
            opacity: 0;
            animation: layerSlideUp 0.5s ease forwards;
            position: relative;
        }

        .stack-layer:nth-child(1) { animation-delay: 0.2s; border-radius: 0 0 16px 16px; }
        .stack-layer:nth-child(2) { animation-delay: 0.5s; }
        .stack-layer:nth-child(3) { animation-delay: 0.8s; }
        .stack-layer:nth-child(4) { animation-delay: 1.1s; }
        .stack-layer:nth-child(5) { animation-delay: 1.4s; border-radius: 16px 16px 0 0; }

        @keyframes layerSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stack-layer.l1 { background: linear-gradient(90deg, #374151, #4b5563); }
        .stack-layer.l2 { background: linear-gradient(90deg, #0369a1, #0284c7); }
        .stack-layer.l3 { background: linear-gradient(90deg, #7c3aed, #8b5cf6); }
        .stack-layer.l4 { background: linear-gradient(90deg, var(--put), #fbbf24); }
        .stack-layer.l5 { background: linear-gradient(90deg, var(--green), #4ade80); }

        .stack-emoji { font-size: 1.6em; }

        .stack-text strong { color: white; display: block; }
        .stack-text span { font-size: 0.85em; opacity: 0.9; }

        .stack-analogy {
            position: absolute;
            left: 20px;
            font-size: 0.8em;
            opacity: 0.7;
            font-style: italic;
        }

        /* ── Auth Animation ── */
        .auth-flow {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
        }

        .auth-stages {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .auth-stage {
            flex: 1;
            min-width: 260px;
            max-width: 400px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        }

        .auth-stage-header {
            padding: 14px 20px;
            color: white;
            font-weight: 700;
            font-size: 1.05em;
            text-align: center;
        }

        .auth-stage-header.authn { background: linear-gradient(135deg, var(--ch2), #8b5cf6); }
        .auth-stage-header.authz { background: linear-gradient(135deg, var(--ch3), #0284c7); }

        .auth-stage-body { padding: 20px; }

        .auth-person {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 10px;
            margin-bottom: 10px;
            animation: fadeSlideIn 0.5s ease forwards;
            opacity: 0;
        }

        .auth-person:nth-child(1) { animation-delay: 0.3s; }
        .auth-person:nth-child(2) { animation-delay: 0.6s; }

        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateX(-15px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .auth-person.pass {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
        }

        .auth-person.fail {
            background: #fef2f2;
            border: 1px solid #fecaca;
        }

        .auth-person-emoji { font-size: 1.5em; }

        .auth-result {
            font-weight: 700;
            font-size: 0.85em;
            margin-right: auto;
            padding: 3px 10px;
            border-radius: 6px;
        }

        .auth-result.yes { background: #dcfce7; color: var(--green); }
        .auth-result.no { background: #fef2f2; color: var(--red); }

        /* ── Storage Lockers Animation ── */
        .lockers-visual {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
        }

        .lockers-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .locker {
            border-radius: 16px;
            text-align: center;
            padding: 0;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: default;
        }

        .locker:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }

        .locker-top {
            padding: 24px 16px 16px;
            font-size: 2.8em;
            position: relative;
        }

        .locker:nth-child(1) .locker-top { background: linear-gradient(180deg, #fef3c7, #fff); }
        .locker:nth-child(2) .locker-top { background: linear-gradient(180deg, #dbeafe, #fff); }
        .locker:nth-child(3) .locker-top { background: linear-gradient(180deg, #ede9fe, #fff); }

        .locker-top .lock-icon {
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 0.4em;
            animation: lockWiggle 3s ease-in-out infinite;
        }

        @keyframes lockWiggle {
            0%, 80%, 100% { transform: rotate(0deg); }
            85% { transform: rotate(-8deg); }
            90% { transform: rotate(8deg); }
            95% { transform: rotate(-4deg); }
        }

        .locker-body {
            padding: 16px;
        }

        .locker-name {
            font-weight: 700;
            color: var(--dark);
            font-size: 1.05em;
            margin-bottom: 4px;
        }

        .locker-time {
            font-size: 0.8em;
            padding: 3px 10px;
            border-radius: 999px;
            display: inline-block;
            margin-bottom: 8px;
        }

        .locker:nth-child(1) .locker-time { background: #fef3c7; color: #92400e; }
        .locker:nth-child(2) .locker-time { background: #dbeafe; color: #1e40af; }
        .locker:nth-child(3) .locker-time { background: #ede9fe; color: #5b21b6; }

        .locker-desc {
            font-size: 0.88em;
            color: var(--gray);
        }

        /* ── Browser Trio (HTML/CSS/JS) ── */
        .trio-visual {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
        }

        .trio-house {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0;
            max-width: 750px;
            margin: 0 auto;
        }

        .trio-pillar {
            text-align: center;
            padding: 0;
            position: relative;
            opacity: 0;
            animation: pillarRise 0.6s ease forwards;
        }

        .trio-pillar:nth-child(1) { animation-delay: 0.3s; }
        .trio-pillar:nth-child(2) { animation-delay: 0.7s; }
        .trio-pillar:nth-child(3) { animation-delay: 1.1s; }

        @keyframes pillarRise {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .trio-top {
            padding: 24px 16px;
            border-radius: 16px 16px 0 0;
            font-size: 2.8em;
            position: relative;
        }

        .trio-pillar:nth-child(1) .trio-top { background: linear-gradient(180deg, #fed7aa, #fff7ed); }
        .trio-pillar:nth-child(2) .trio-top { background: linear-gradient(180deg, #bfdbfe, #eff6ff); }
        .trio-pillar:nth-child(3) .trio-top { background: linear-gradient(180deg, #fde68a, #fffbeb); }

        .trio-body {
            padding: 18px 14px;
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 16px 16px;
            min-height: 160px;
        }

        .trio-name {
            font-weight: 800;
            font-size: 1.15em;
            margin-bottom: 4px;
        }

        .trio-pillar:nth-child(1) .trio-name { color: #ea580c; }
        .trio-pillar:nth-child(2) .trio-name { color: #2563eb; }
        .trio-pillar:nth-child(3) .trio-name { color: #ca8a04; }

        .trio-role {
            font-size: 0.88em;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 6px;
        }

        .trio-desc {
            font-size: 0.82em;
            color: var(--gray);
            line-height: 1.5;
        }

        .trio-plus {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--ch3-mid);
            opacity: 0;
            animation: pillarRise 0.4s ease forwards;
        }

        .trio-plus:nth-child(2) { animation-delay: 0.5s; }
        .trio-plus:nth-child(4) { animation-delay: 0.9s; }

        /* ── DOM Tree Visual ── */
        .dom-visual {
            background: white;
            border-radius: 20px;
            padding: 36px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
            overflow: hidden;
        }

        .dom-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
            max-width: 600px;
            margin: 0 auto;
        }

        .dom-node {
            padding: 10px 22px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.95em;
            text-align: center;
            position: relative;
            opacity: 0;
            animation: nodeAppear 0.4s ease forwards;
        }

        .dom-node.root {
            background: linear-gradient(135deg, #1e293b, #334155);
            color: white;
            font-size: 1.05em;
            animation-delay: 0.2s;
        }

        .dom-node.head-n { background: #dbeafe; color: #1e40af; animation-delay: 0.5s; }
        .dom-node.body-n { background: #dcfce7; color: #166534; animation-delay: 0.5s; }
        .dom-node.child { background: #f1f5f9; color: var(--dark2); font-size: 0.88em; font-weight: 600; animation-delay: 0.8s; }

        @keyframes nodeAppear {
            from { opacity: 0; transform: scale(0.7); }
            to { opacity: 1; transform: scale(1); }
        }

        .dom-connector {
            width: 2px;
            height: 20px;
            background: var(--border);
            opacity: 0;
            animation: connShow 0.3s ease forwards;
        }

        .dom-connector.c1 { animation-delay: 0.35s; }
        .dom-connector.c2 { animation-delay: 0.65s; }

        .dom-branch {
            display: flex;
            gap: 30px;
            position: relative;
        }

        .dom-branch::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 60px);
            height: 2px;
            background: var(--border);
        }

        .dom-branch-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
        }

        .dom-branch-item .dom-connector { height: 18px; }

        .dom-children {
            display: flex;
            gap: 12px;
            position: relative;
        }

        .dom-children::before {
            content: '';
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 30px);
            height: 2px;
            background: var(--border);
        }

        .dom-children .dom-node {
            font-size: 0.8em;
            padding: 6px 14px;
        }

        /* ── Old vs New Web Visual ── */
        .oldnew-visual {
            background: white;
            border-radius: 20px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
            overflow: hidden;
        }

        .oldnew-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
        }

        .oldnew-side {
            padding: 30px;
        }

        .oldnew-side:first-child {
            border-left: 2px solid var(--border);
            border-right: none;
            background: #fafafa;
        }

        .oldnew-label {
            font-weight: 700;
            font-size: 1.1em;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .oldnew-label.old { color: var(--gray); }
        .oldnew-label.new { color: var(--ch3); }

        /* Page reload animation */
        .reload-demo {
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            height: 180px;
            position: relative;
            background: white;
        }

        .reload-bar {
            height: 28px;
            background: #f1f5f9;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            padding: 0 10px;
            gap: 4px;
        }

        .reload-bar .r-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #cbd5e1;
        }

        .reload-content {
            padding: 12px;
            height: calc(100% - 28px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .old-flash {
            animation: pageFlash 2.5s ease-in-out infinite;
        }

        @keyframes pageFlash {
            0%, 40% { opacity: 1; }
            45% { opacity: 0; background: white; }
            50% { opacity: 0; }
            55% { opacity: 1; }
            100% { opacity: 1; }
        }

        .new-update {
            position: relative;
        }

        .new-update .update-highlight {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
            animation: highlightPulse 2s ease-in-out infinite;
        }

        @keyframes highlightPulse {
            0%, 100% { background: #dcfce7; color: var(--green); }
            50% { background: #bbf7d0; color: #15803d; box-shadow: 0 0 12px rgba(34,197,94,0.3); }
        }

        .no-reload-badge {
            display: inline-block;
            background: #dcfce7;
            color: var(--green);
            padding: 3px 12px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.8em;
            margin-top: 8px;
        }

        .full-reload-badge {
            display: inline-block;
            background: #fef2f2;
            color: var(--red);
            padding: 3px 12px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.8em;
            margin-top: 8px;
        }

        /* ── Traffic Light SPA Visual ── */
        .traffic-visual {
            background: white;
            border-radius: 20px;
            margin: 28px 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-200);
            overflow: hidden;
        }

        .traffic-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
        }

        .traffic-side {
            padding: 30px 24px 28px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .traffic-side:first-child {
            border-left: 2px solid var(--border);
            border-right: none;
            background: #fafafa;
        }

        .traffic-side-label {
            font-weight: 700;
            font-size: 1.05em;
            margin-bottom: 18px;
            text-align: center;
        }

        .traffic-side-label.old { color: var(--red); }
        .traffic-side-label.modern { color: var(--green); }

        /* Browser frame for traffic light */
        .tl-browser {
            border: 2px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
            width: 100%;
            max-width: 240px;
            background: white;
        }

        .tl-browser-bar {
            height: 26px;
            background: #f1f5f9;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            padding: 0 10px;
            gap: 4px;
        }

        .tl-browser-bar .tl-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: #cbd5e1;
        }

        .tl-browser-bar .tl-url {
            font-size: 0.6em;
            color: var(--gray);
            margin-right: 6px;
            font-family: monospace;
            white-space: nowrap;
            overflow: hidden;
        }

        .tl-browser-body {
            padding: 20px 14px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 180px;
            justify-content: center;
            background: #f8fafc;
        }

        /* Traffic light housing */
        .traffic-light {
            background: #1e293b;
            border-radius: 14px;
            padding: 12px 14px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.25);
            position: relative;
        }

        .traffic-light::after {
            content: '';
            position: absolute;
            bottom: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 18px;
            background: #475569;
            border-radius: 0 0 4px 4px;
        }

        .tl-bulb {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #334155;
        }

        .tl-bulb.off {
            background: #334155;
        }

        .tl-bulb.red-on {
            background: #ef4444;
            box-shadow: 0 0 16px #ef4444, 0 0 36px rgba(239,68,68,0.4);
        }

        .tl-bulb.orange-on {
            background: #f59e0b;
            box-shadow: 0 0 16px #f59e0b, 0 0 36px rgba(245,158,11,0.4);
        }

        .tl-bulb.green-on {
            background: #22c55e;
            box-shadow: 0 0 16px #22c55e, 0 0 36px rgba(34,197,94,0.4);
        }

        .tl-file-tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
        }

        .tl-file-tab {
            font-size: 0.65em;
            padding: 3px 8px;
            border-radius: 6px;
            font-family: monospace;
            font-weight: 600;
            opacity: 0.3;
            background: #e2e8f0;
            color: var(--gray);
        }

        .tl-file-tab.active {
            opacity: 1;
            color: white;
        }

        .tl-file-tab.active.red { background: #ef4444; }
        .tl-file-tab.active.orange { background: #f59e0b; }
        .tl-file-tab.active.green { background: #22c55e; }

        .tl-status {
            font-size: 0.75em;
            font-weight: 700;
            margin-top: 14px;
            padding: 3px 14px;
            border-radius: 999px;
            text-align: center;
        }

        .tl-status.reload {
            background: #fef2f2;
            color: var(--red);
        }

        .tl-status.smooth {
            background: #f0fdf4;
            color: var(--green);
        }

        .traffic-desc {
            font-size: 0.85em;
            color: var(--gray);
            margin-top: 14px;
            text-align: center;
            line-height: 1.6;
        }

        @media (max-width: 700px) {
            .traffic-grid { grid-template-columns: 1fr; }
            .traffic-side:first-child { border-left: none; border-bottom: 2px solid var(--border); }
        }

        /* ───── Responsive ───── */
        @media (max-width: 1024px) {
            .top-nav-inner { padding: 0 24px; }
            .container { max-width: 100%; padding: 24px; }
            .main-layout { grid-template-columns: 1fr; }
            .sidebar { display: none; }
        }

        @media (max-width: 700px) {
            .top-nav-inner { padding: 0 16px; }
            .nav-links { display: none; }
            .container { max-width: 100%; padding: 16px; }
            .cover { padding: 50px 20px; }
            .cover h1 { font-size: 2em; }
            .compare-grid { grid-template-columns: 1fr; }
            .map-grid { grid-template-columns: 1fr !important; }
            .api-bridge-row { flex-direction: column; }
            .api-bridge-arrow { transform: rotate(90deg); }
            .topic { padding: 22px; }
            .story { padding: 20px; }
            .json-box { padding: 16px; font-size: 0.82em; }
            .recon-steps-visual { flex-direction: column; }
            .recon-arrow { transform: rotate(90deg); }
            .flow-row { flex-direction: column; }
            .flow-pipe { width: 50px; height: 70px; transform: rotate(90deg); }
            .scene-body { grid-template-columns: 1fr; }
            .scene-arrow-col { flex-direction: row; padding: 10px 0; }
            .stack-tower { max-width: 100%; }
            .auth-stages { flex-direction: column; }
            .lockers-row { grid-template-columns: 1fr; }
            .access-bar.employee, .access-bar.customer { width: 100%; }
            .http-tabs { gap: 4px; }
            .http-tab { padding: 8px 14px; font-size: 0.85em; }
            .footer { padding: 32px 16px; }
            .footer-inner { justify-content: center; text-align: center; }
        }

        @media print {
            body { background: white; }
            .top-nav { display: none; }
            .cover { break-after: page; }
            .page-break { break-before: page; height: 0; }
            .story, .flow-visual, .compare-card, .map-card,
            .recon-animation, .http-demo, .stack-visual,
            .auth-flow, .lockers-visual, .access-visual {
                box-shadow: none;
                border: 1px solid #ddd;
            }
            .recon-step-node, .recon-arrow, .stack-layer,
            .auth-person, .access-bar { animation: none; opacity: 1; transform: none; }
        }
    </style>
</head>
<body>

<!-- Top Navigation -->
<nav class="top-nav">
    <div class="top-nav-inner">
        <a href="../index.html" class="nav-brand">
            <div class="nav-brand-icon">CYB</div>
            <span class="nav-brand-text">CYB 236: أمن تطبيقات الويب</span>
        </a>
        <div class="nav-links">
            <a href="index.html" class="lang-switch">English</a>
            <a href="../index.html" class="nav-link">الصفحة الرئيسية</a>
            <a href="../syllabus.html" class="nav-link">الخطة الدراسية</a>
            <a href="index.html" class="nav-link">الأسبوع 2</a>
            <a href="#" class="nav-link active">مذكرة ف2-ف3</a>
        </div>
    </div>
</nav>

<!-- ══════════════════════ COVER ══════════════════════ -->
<header class="cover">
    <div class="cover-inner">
        <div class="cover-breadcrumb">
            <a href="../index.html">CYB 236</a>
            <span>/</span>
            <span>الموضوع 2</span>
        </div>
        <div class="cover-badge">
            <span class="cover-badge-dot"></span>
            الموضوع 2 - التقنيات
        </div>
        <h1>استطلاع الويب وبنية<br>تطبيقات الويب الحديثة</h1>
        <p class="sub">فهم كيف تعمل تطبيقات الويب وكيفية رسم خريطتها</p>
        <div class="cover-chips">
            <div class="cover-chip ch2">استطلاع الويب</div>
            <div class="cover-chip ch3">بنية تطبيقات الويب الحديثة</div>
        </div>
    </div>
</header>

<div class="container">
<div class="main-layout">

<aside class="sidebar">
    <div class="sidebar-card">
        <div class="sidebar-header">
            <div class="sidebar-title">المحتويات</div>
        </div>
        <nav class="sidebar-nav">
            <a href="#chapter-2" class="sidebar-link active"><span class="sidebar-link-number">1</span>نظرة عامة على الفصل 2</a>
            <a href="#learning-objectives" class="sidebar-link"><span class="sidebar-link-number">2</span>أهداف التعلم</a>
            <a href="#what-is-recon" class="sidebar-link"><span class="sidebar-link-number">3</span>ما هو الاستطلاع؟</a>
            <a href="#why-recon" class="sidebar-link"><span class="sidebar-link-number">4</span>لماذا الاستطلاع مهم؟</a>
            <a href="#role-based-access" class="sidebar-link"><span class="sidebar-link-number">5</span>التحكم بالوصول حسب الدور</a>
            <a href="#web-mapping" class="sidebar-link"><span class="sidebar-link-number">6</span>رسم خريطة التطبيق</a>
            <a href="#chapter-2-summary" class="sidebar-link"><span class="sidebar-link-number">7</span>ملخص الفصل 2</a>
            <a href="#chapter-3" class="sidebar-link"><span class="sidebar-link-number">8</span>نظرة عامة على الفصل 3</a>
            <a href="#client-server" class="sidebar-link"><span class="sidebar-link-number">9</span>العميل والخادم</a>
            <a href="#three-building-blocks" class="sidebar-link"><span class="sidebar-link-number">10</span>HTML/CSS/JavaScript</a>
            <a href="#dom-map" class="sidebar-link"><span class="sidebar-link-number">11</span>شجرة DOM</a>
            <a href="#modern-no-reload" class="sidebar-link"><span class="sidebar-link-number">12</span>بدون إعادة تحميل</a>
            <a href="#spa-frameworks" class="sidebar-link"><span class="sidebar-link-number">13</span>تطبيقات الصفحة الواحدة</a>
            <a href="#rest-api" class="sidebar-link"><span class="sidebar-link-number">14</span>واجهة REST API</a>
            <a href="#json-data" class="sidebar-link"><span class="sidebar-link-number">15</span>صيغة JSON</a>
            <a href="#technology-stack" class="sidebar-link"><span class="sidebar-link-number">16</span>الحزمة التقنية</a>
            <a href="#auth-vs-authz" class="sidebar-link"><span class="sidebar-link-number">17</span>المصادقة والتفويض</a>
            <a href="#client-storage" class="sidebar-link"><span class="sidebar-link-number">18</span>التخزين في المتصفح</a>
            <a href="#chapter-3-summary" class="sidebar-link"><span class="sidebar-link-number">19</span>ملخص الفصل 3</a>
        </nav>
    </div>
</aside>

<main class="content">

<!-- ══════════════════════════════════════════════════════════
     CHAPTER 2
     ══════════════════════════════════════════════════════════ -->

<div id="chapter-2" class="chapter-header">
    <div class="chapter-num ch2">الفصل 2</div>
    <div class="chapter-title">مقدمة في استطلاع تطبيقات الويب</div>
    <div class="chapter-divider ch2"></div>
</div>

<!-- ── Learning Objectives ── -->
<div id="learning-objectives" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch2">&#127919;</div>
        <h2>أهداف التعلم</h2>
    </div>

    <div class="objectives-grid">
        <div class="objective-card">
            <div class="objective-number">1</div>
            <div class="objective-text"><strong>تعريف</strong> استطلاع تطبيقات الويب وشرح لماذا يجب أن يتم قبل الاختبار الهجومي.</div>
        </div>
        <div class="objective-card">
            <div class="objective-number">2</div>
            <div class="objective-text"><strong>رسم خريطة</strong> للأدوار والـ <span class="term">APIs</span> المخفية والميزات لكشف سطح الهجوم وحدود التفويض.</div>
        </div>
        <div class="objective-card">
            <div class="objective-number">3</div>
            <div class="objective-text"><strong>وصف</strong> بنية الويب الحديثة: نموذج العميل/الخادم، <span class="term">REST APIs</span>، <span class="term">JSON</span>، وسلوك <span class="term">SPA</span>.</div>
        </div>
        <div class="objective-card">
            <div class="objective-number">4</div>
            <div class="objective-text"><strong>التمييز</strong> بين المصادقة والتفويض، وتحديد الإخفاقات الأمنية الشائعة في كل منهما.</div>
        </div>
        <div class="objective-card">
            <div class="objective-number">5</div>
            <div class="objective-text"><strong>فحص</strong> طبقات الحزمة التقنية الرئيسية (خادم الويب، قاعدة البيانات، تخزين المتصفح) لمخاطر سوء التهيئة وكشف البيانات.</div>
        </div>
    </div>
</div>

<!-- ── What is Recon ── -->
<div id="what-is-recon" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch2">&#128269;</div>
        <h2>ما هو الاستطلاع؟</h2>
    </div>

    <p><strong>الاستطلاع</strong> (أو <span class="term">Recon</span>) يعني <strong>جمع المعلومات</strong> عن تطبيق ويب <em>قبل</em> أن تحاول اختبار أمنه. وهو دائمًا <strong>الخطوة الأولى</strong>.</p>

    <div class="story ch2">
        <div class="story-label ch2">&#128214; وقت القصة</div>
        <p>تخيّل أن <strong>أحمد</strong> مختبر أمني تم توظيفه لاختبار موقع تسوق إلكتروني. هل يبدأ بالاختراق فورًا؟ <strong>لا!</strong></p>
        <p>أولاً، يفتح أحمد الموقع ويبدأ <strong>بالاستكشاف</strong>. ينقر على كل صفحة. يتحقق من التقنية التي يستخدمها الموقع. يراقب ما يحدث عند إنشاء حساب، تسجيل الدخول، أو البحث عن منتج.</p>
        <div class="dialogue">
            <span class="character ahmed">يفكر أحمد:</span> "قبل أن أختبر الأقفال على الأبواب، يجب أن أعرف كم عدد الأبواب في هذا المبنى، وأين تقع، ونوع الأقفال المستخدمة."
        </div>
    </div>

    <!-- VISUALIZATION: Recon Steps Animation -->
    <div class="recon-animation">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:20px; font-size:1.1em;">الخطوات الأربع للاستطلاع</p>
        <div class="recon-steps-visual">
            <div class="recon-step-node">
                <div class="recon-step-icon s1">&#128270;</div>
                <div class="recon-step-label">الخطوة 1: الاستكشاف</div>
                <div class="recon-step-sub">تصفح كل صفحة</div>
            </div>
            <div class="recon-arrow">&#10132;</div>
            <div class="recon-step-node">
                <div class="recon-step-icon s2">&#128295;</div>
                <div class="recon-step-label">الخطوة 2: تحديد التقنية</div>
                <div class="recon-step-sub">ما البرامج المستخدمة؟</div>
            </div>
            <div class="recon-arrow">&#10132;</div>
            <div class="recon-step-node">
                <div class="recon-step-icon s3">&#128279;</div>
                <div class="recon-step-label">الخطوة 3: اكتشاف الـ <span class="term">APIs</span></div>
                <div class="recon-step-sub">إيجاد النقاط المخفية</div>
            </div>
            <div class="recon-arrow">&#10132;</div>
            <div class="recon-step-node">
                <div class="recon-step-icon s4">&#128221;</div>
                <div class="recon-step-label">الخطوة 4: التوثيق</div>
                <div class="recon-step-sub">كتابة ملاحظات منظمة</div>
            </div>
        </div>
    </div>

    <div class="warning">
        <h4>&#9888;&#65039; تحذير قانوني</h4>
        <p>يجب أن يتم الاستطلاع <strong>فقط</strong> على التطبيقات التي تملكها أو لديك <strong>إذن كتابي</strong> لاختبارها. الاختبار بدون إذن قد يؤدي إلى مشاكل قانونية.</p>
    </div>
</div>

<!-- ── Why Recon is Important ── -->
<div id="why-recon" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch2">&#127919;</div>
        <h2>لماذا الاستطلاع مهم؟</h2>
    </div>

    <ul class="clean-list ch2">
        <li><strong>اكتشاف الميزات المخفية</strong> &mdash; أجزاء من التطبيق لا يراها المستخدمون العاديون (مثل لوحات الإدارة)</li>
        <li><strong>فهم التقنية</strong> &mdash; ما البرنامج الذي بُني به التطبيق، لمعرفة نقاط الضعف المحتملة</li>
        <li><strong>إيجاد خوادم غير محمية</strong> &mdash; أحيانًا تنسى الشركة تأمين خادم ما</li>
        <li><strong>ترتيب أولويات الاختبار</strong> &mdash; معرفة الأجزاء الضعيفة لتركيز الوقت بحكمة</li>
    </ul>

    <div class="story ch2">
        <div class="story-label ch2">&#128214; وقت القصة &mdash; صفحة الإدارة المخفية</div>
        <p><strong>أحمد</strong> يختبر متجرًا إلكترونيًا. كمستخدم عادي، يرى فقط المنتجات وملفه الشخصي وطلباته. لكن أثناء استطلاعه، اكتشف رابطًا يسمى <code>/admin/dashboard</code>.</p>
        <p>هذه الصفحة لم تكن مرتبطة بأي مكان &mdash; لكنها <strong>موجودة</strong> وقد لا تكون محمية بشكل صحيح!</p>
        <div class="dialogue">
            <span class="character ahmed">أحمد:</span> "إذا نظرت فقط لما يعرضه لي الموقع، سأفوّت الأبواب المخفية. الاستطلاع يساعدني في إيجاد <em>جميع</em> الأبواب."
        </div>
    </div>
</div>

<!-- ── Role-Based Access ── -->
<div id="role-based-access" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch2">&#128274;</div>
        <h2>ليس الجميع يرى نفس الشيء</h2>
    </div>

    <p>معظم تطبيقات الويب تمنح المستخدمين مستويات وصول مختلفة. وهذا يسمى <strong>التحكم بالوصول حسب الدور</strong> (<span class="term">Role-Based Access Control</span>).</p>

    <div class="story ch2">
        <div class="story-label ch2">&#128214; وقت القصة &mdash; أحمد وعمر في البنك</div>
        <p><strong>أحمد</strong> (عميل) يسجل الدخول إلى بنكه الإلكتروني. يمكنه فقط <strong>عرض</strong> رصيده و<strong>تحويل</strong> الأموال.</p>
        <p><strong>عمر</strong> (موظف في البنك) يستخدم نفس النظام لكن بصلاحيات أعلى. يمكنه <strong>إنشاء</strong> و<strong>تعديل</strong> و<strong>إغلاق</strong> الحسابات.</p>
        <div class="dialogue">
            المتخصص الجيد في الاستطلاع يحاول اكتشاف كيف يبدو تطبيق <span class="character omar">عمر</span>، حتى عندما يكون لديه فقط وصول إلى عرض <span class="character ahmed">أحمد</span>.
        </div>
    </div>

    <!-- VISUALIZATION: Access Level Bars -->
    <div class="access-visual">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:20px;">مستويات الوصول &mdash; من يمكنه فعل ماذا؟</p>
        <div class="access-levels">
            <div class="access-bar admin">
                <span class="access-bar-emoji">&#128119;</span>
                <div class="access-bar-text">
                    <strong>المدير (مشرف)</strong>
                    <span>تحكم كامل: إنشاء، قراءة، تحديث، حذف + إدارة المستخدمين</span>
                </div>
            </div>
            <div class="access-bar employee">
                <span class="access-bar-emoji">&#128110;</span>
                <div class="access-bar-text">
                    <strong>عمر (موظف)</strong>
                    <span>إنشاء حسابات، تعديل، إغلاق حسابات</span>
                </div>
            </div>
            <div class="access-bar customer">
                <span class="access-bar-emoji">&#128100;</span>
                <div class="access-bar-text">
                    <strong>أحمد (عميل)</strong>
                    <span>عرض الرصيد، تحويل الأموال</span>
                </div>
            </div>
        </div>
        <p style="text-align:center; color:var(--gray); font-size:0.85em; margin-top:14px;">كلما كان الشريط أعرض = زادت صلاحيات هذا الدور</p>
    </div>
</div>

<!-- ── Web Application Mapping ── -->
<div id="web-mapping" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch2">&#128506;</div>
        <h2>رسم خريطة تطبيق الويب (تدوين الملاحظات)</h2>
    </div>

    <p>أثناء اكتشافك للمعلومات خلال الاستطلاع، يجب أن <strong>تدوّنها</strong> بطريقة منظمة. هذه المجموعة من الملاحظات تسمى <strong>خريطة</strong>.</p>

    <div class="map-grid">
        <div class="map-card">
            <div class="mc-icon">&#128279;</div>
            <div class="mc-title">نقاط الـ <span class="term">API</span></div>
            <div class="mc-desc">الروابط التي يستخدمها التطبيق خلف الكواليس</div>
        </div>
        <div class="map-card">
            <div class="mc-icon">&#128295;</div>
            <div class="mc-title">التقنيات</div>
            <div class="mc-desc">ما البرامج التي تشغّل التطبيق</div>
        </div>
        <div class="map-card">
            <div class="mc-icon">&#128101;</div>
            <div class="mc-title">أدوار المستخدمين</div>
            <div class="mc-desc">من يمكنه فعل ماذا في التطبيق</div>
        </div>
        <div class="map-card">
            <div class="mc-icon">&#128230;</div>
            <div class="mc-title">الميزات</div>
            <div class="mc-desc">تسجيل الدخول، الرفع، البحث، إلخ.</div>
        </div>
    </div>

    <div class="story ch2">
        <div class="story-label ch2">&#128214; دفتر أحمد</div>
        <p>بعد ساعة من الاستطلاع، تبدو ملاحظات أحمد المنظمة هكذا:</p>
        <div class="json-box">
<span class="c">// ملاحظات أحمد لاستطلاع "ShopStar.com"</span><br><br>
{<br>
&nbsp;&nbsp;<span class="k">"application"</span>: <span class="s">"ShopStar.com"</span>,<br>
&nbsp;&nbsp;<span class="k">"technology"</span>: <span class="s">"Node.js + Angular"</span>,<br>
&nbsp;&nbsp;<span class="k">"pages_found"</span>: [<span class="s">"Home"</span>, <span class="s">"Products"</span>, <span class="s">"Login"</span>, <span class="s">"Admin Panel"</span>],<br>
&nbsp;&nbsp;<span class="k">"api_endpoints"</span>: [<span class="s">"/api/products"</span>, <span class="s">"/api/users"</span>, <span class="s">"/api/orders"</span>],<br>
&nbsp;&nbsp;<span class="k">"security_observations"</span>: <span class="s">"Admin page has no login check!"</span><br>
}
        </div>
    </div>

    <div class="key-point">
        <h4>&#128161; نقطة مهمة</h4>
        <p>استخدم أي صيغة لملاحظاتك &mdash; ملف نصي، وورد، أو <span class="term">JSON</span>. المهم أن تكون <strong>منظمة</strong> و<strong>سهلة القراءة لاحقًا</strong>.</p>
    </div>
</div>

<!-- ── Chapter 2 Summary ── -->
<div id="chapter-2-summary" class="summary-banner ch2">
    <h3>&#10003; ملخص الفصل 2</h3>
    <ul>
        <li><strong>الاستطلاع</strong> = جمع المعلومات عن تطبيق ويب قبل اختباره</li>
        <li>هو <strong>دائمًا الخطوة الأولى</strong> في اختبار الأمان</li>
        <li>المستخدمون المختلفون لديهم <strong>مستويات وصول مختلفة</strong> (عميل مقابل موظف مقابل مدير)</li>
        <li>الاستطلاع يساعدك في اكتشاف <strong>الميزات والـ <span class="term">APIs</span> المخفية</strong></li>
        <li>وثّق نتائجك دائمًا في ملاحظات منظمة ("خريطة")</li>
        <li>قم بالاستطلاع فقط على التطبيقات التي <strong>تملكها أو لديك إذن</strong> لاختبارها</li>
    </ul>
</div>

<!-- ══════════════════════ PAGE BREAK ══════════════════════ -->
<div class="page-break"></div>

<!-- ══════════════════════════════════════════════════════════
     CHAPTER 3
     ══════════════════════════════════════════════════════════ -->

<div id="chapter-3" class="chapter-header">
    <div class="chapter-num ch3">الفصل 3</div>
    <div class="chapter-title">بنية تطبيقات الويب الحديثة</div>
    <div class="chapter-divider ch3"></div>
</div>

<!-- ── Client and Server ── -->
<div id="client-server" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128187;</div>
        <h2>الصورة الكبيرة: العميل والخادم</h2>
    </div>

    <p>كل تطبيق ويب حديث يتكون من <strong>جزأين رئيسيين</strong> يتواصلان مع بعضهما:</p>

    <div class="compare-grid">
        <div class="compare-card" style="border-color: var(--ch2);">
            <h4>&#128187; العميل (<span class="term">Front-End</span>)</h4>
            <p>ما <strong>تراه</strong> في متصفحك أو هاتفك. الأزرار والصور والنماذج. يعمل على <strong>جهازك</strong>.</p>
        </div>
        <div class="compare-card" style="border-color: var(--ch3);">
            <h4>&#128451; الخادم (<span class="term">Back-End</span>)</h4>
            <p>حاسوب قوي في مركز بيانات. <strong>يخزّن البيانات</strong>، يعالج الطلبات، ويرسل الردود. أنت <strong>لا تراه أبدًا</strong>.</p>
        </div>
    </div>

    <!-- VISUALIZATION: Animated Client-Server Flow -->
    <div class="flow-visual">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:20px; font-size:1.1em;">شاهد: كيف يتحدث العميل مع الخادم</p>
        <div class="flow-row">
            <div class="flow-box">
                <div class="flow-emoji">&#128241;</div>
                <div class="flow-name">هاتف أحمد</div>
                <div class="flow-sub">العميل (المتصفح)</div>
            </div>
            <div class="flow-pipe">
                <div class="pipe-line top"></div>
                <div class="pipe-line bot"></div>
                <div class="dot req"></div>
                <div class="dot res"></div>
            </div>
            <div class="flow-box">
                <div class="flow-emoji">&#128279;</div>
                <div class="flow-name"><span class="term">REST API</span></div>
                <div class="flow-sub">الوسيط</div>
            </div>
            <div class="flow-pipe">
                <div class="pipe-line top"></div>
                <div class="pipe-line bot"></div>
                <div class="dot req" style="animation-delay:0.3s;"></div>
                <div class="dot res" style="animation-delay:1.3s;"></div>
            </div>
            <div class="flow-box">
                <div class="flow-emoji">&#128451;</div>
                <div class="flow-name">الخادم</div>
                <div class="flow-sub">قاعدة البيانات والمنطق</div>
            </div>
        </div>
        <div class="flow-legend">
            <span><span class="legend-dot req"></span> طلب (من أحمد)</span>
            <span><span class="legend-dot res"></span> استجابة (من الخادم)</span>
        </div>
    </div>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة</div>
        <p><strong>أحمد</strong> يفتح تطبيق توصيل طعام. يرى المطاعم والقوائم &mdash; هذا هو <strong>العميل</strong>.</p>
        <p>عندما يضغط "اطلب الآن"، يرسل هاتفه رسالة إلى حاسوب الشركة &mdash; هذا هو <strong>الخادم</strong>.</p>
        <div class="dialogue">
            <span class="character ahmed">هاتف أحمد (العميل):</span> "أريد طلب شاورما واحدة، من فضلك."<br>
            <span class="character omar">الخادم:</span> "تم! رقم طلبك 55. التوصيل خلال 30 دقيقة."
        </div>
    </div>
</div>

<!-- ── The Three Building Blocks: HTML, CSS, JavaScript ── -->
<div id="three-building-blocks" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128736;</div>
        <h2>اللبنات الثلاث الأساسية لكل صفحة ويب</h2>
    </div>

    <p>كل صفحة ويب تراها في المتصفح مبنية من <strong>ثلاث تقنيات</strong> تعمل معًا. فكّر في بناء منزل:</p>

    <!-- VISUALIZATION: HTML/CSS/JS Trio -->
    <div class="trio-visual">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:20px; font-size:1.1em;">الأعمدة الثلاثة لصفحة الويب</p>
        <div class="trio-house">
            <div class="trio-pillar">
                <div class="trio-top">&#129521;</div>
                <div class="trio-body">
                    <div class="trio-name"><span class="term">HTML</span></div>
                    <div class="trio-role">الهيكل</div>
                    <div class="trio-desc">مثل <strong>الهيكل العظمي</strong> للمبنى. يحدد ما هو موجود في الصفحة: العناوين، الفقرات، الأزرار، الصور، الروابط، النماذج.</div>
                </div>
            </div>
            <div class="trio-pillar">
                <div class="trio-top">&#127912;</div>
                <div class="trio-body">
                    <div class="trio-name"><span class="term">CSS</span></div>
                    <div class="trio-role">التصميم والمظهر</div>
                    <div class="trio-desc">مثل <strong>الطلاء والديكور</strong>. يتحكم في شكل الأشياء: الألوان، الخطوط، الأحجام، المسافات، التخطيط.</div>
                </div>
            </div>
            <div class="trio-pillar">
                <div class="trio-top">&#9889;</div>
                <div class="trio-body">
                    <div class="trio-name"><span class="term">JavaScript</span></div>
                    <div class="trio-role">السلوك والتفاعل</div>
                    <div class="trio-desc">مثل <strong>الكهرباء والسباكة</strong>. يجعل الأشياء تفاعلية: النقر على الأزرار، إرسال النماذج، تحميل بيانات جديدة.</div>
                </div>
            </div>
        </div>
    </div>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة &mdash; عمر يبني موقعًا</div>
        <p><strong>عمر</strong> يريد بناء موقع لمقهاه. يحتاج إلى التقنيات الثلاث:</p>
        <div class="dialogue">
            <span class="character omar">الخطوة 1 (<span class="term">HTML</span>):</span> عمر يكتب الهيكل &mdash; اسم المقهى، عناصر القائمة، زر الطلب، نموذج التواصل. الصفحة موجودة، لكنها تبدو بسيطة وقبيحة.<br><br>
            <span class="character omar">الخطوة 2 (<span class="term">CSS</span>):</span> عمر يضيف التنسيق &mdash; خلفية بنية، خطوط جميلة، الشعار في المنتصف، القائمة في شبكة أنيقة. الآن تبدو احترافية!<br><br>
            <span class="character omar">الخطوة 3 (<span class="term">JavaScript</span>):</span> عمر يضيف السلوك &mdash; عندما يضغط الزبون "أضف للسلة"، يظهر العنصر في السلة. عندما يضغط "إرسال الطلب"، يُرسل الطلب للخادم. الآن الموقع <em>يعمل</em>!
        </div>
        <p>بدون <span class="term">HTML</span>، لا يوجد <strong>شيء في الصفحة</strong>. بدون <span class="term">CSS</span>، تبدو <strong>قبيحة</strong>. بدون <span class="term">JavaScript</span>، لا شيء <strong>يستجيب</strong> لنقراتك.</p>
    </div>

    <div class="key-point">
        <h4>&#128161; لماذا هذا مهم للأمان؟</h4>
        <p>كمختبر أمان، تحتاج لمعرفة هذه التقنيات الثلاث لأن الثغرات يمكن أن توجد في أي منها. مثلًا، <strong><span class="term">JavaScript</span></strong> هو المكان الذي تحدث فيه معظم هجمات الويب (مثل <span class="term">XSS</span> &mdash; البرمجة عبر المواقع). فهم ما تفعله كل تقنية يساعدك في معرفة <em>أين</em> تبحث عن نقاط الضعف.</p>
    </div>
</div>

<!-- ── The DOM ── -->
<div id="dom-map" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#127795;</div>
        <h2>شجرة <span class="term">DOM</span> &mdash; خريطة المتصفح للصفحة</h2>
    </div>

    <p>عندما تفتح صفحة ويب، يقرأ المتصفح كود <span class="term">HTML</span> ويبني <strong>هيكلًا شجريًا</strong> في الذاكرة يسمى <strong><span class="term">DOM</span></strong> (<span class="term">Document Object Model</span>). فكّر فيه كـ<strong>شجرة عائلة</strong> لجميع العناصر في الصفحة.</p>

    <!-- VISUALIZATION: DOM Tree -->
    <div class="dom-visual">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:20px; font-size:1.1em;">شجرة <span class="term">DOM</span> &mdash; كيف يرى المتصفح صفحة الويب</p>
        <div class="dom-tree">
            <div class="dom-node root">&#128196; المستند (الصفحة كاملة)</div>
            <div class="dom-connector c1"></div>
            <div class="dom-branch">
                <div class="dom-branch-item">
                    <div class="dom-connector c2"></div>
                    <div class="dom-node head-n">&#128450; &lt;head&gt;</div>
                    <div class="dom-connector c2" style="animation-delay:0.8s;"></div>
                    <div class="dom-children">
                        <div class="dom-node child" style="animation-delay:1s;">العنوان</div>
                        <div class="dom-node child" style="animation-delay:1.1s;">رابط CSS</div>
                    </div>
                </div>
                <div class="dom-branch-item">
                    <div class="dom-connector c2"></div>
                    <div class="dom-node body-n">&#128196; &lt;body&gt;</div>
                    <div class="dom-connector c2" style="animation-delay:0.8s;"></div>
                    <div class="dom-children">
                        <div class="dom-node child" style="animation-delay:1s;">&lt;h1&gt; عنوان</div>
                        <div class="dom-node child" style="animation-delay:1.1s;">&lt;p&gt; نص</div>
                        <div class="dom-node child" style="animation-delay:1.2s;">&lt;button&gt;</div>
                        <div class="dom-node child" style="animation-delay:1.3s;">&lt;img&gt;</div>
                    </div>
                </div>
            </div>
        </div>
        <p style="text-align:center; color:var(--gray); font-size:0.85em; margin-top:20px;">يبني المتصفح هذه الشجرة من <span class="term">HTML</span>. يمكن لـ<span class="term">JavaScript</span> <strong>تغيير</strong> أي جزء من هذه الشجرة في الوقت الفعلي!</p>
    </div>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة &mdash; الهيكل التنظيمي لمدرسة أحمد</div>
        <p>فكّر في <span class="term">DOM</span> مثل <strong>الهيكل التنظيمي لمدرسة أحمد</strong>:</p>
        <div class="dialogue">
            في القمة توجد <strong>المدرسة</strong> (= المستند).<br>
            تحتها قسمان: <strong>الشؤون الأكاديمية</strong> (= &lt;head&gt;) و<strong>شؤون الطلاب</strong> (= &lt;body&gt;).<br>
            تحت الأكاديمية: <strong>قسم الرياضيات</strong>، <strong>قسم العلوم</strong> (= العنوان، CSS).<br>
            تحت شؤون الطلاب: <strong>النادي الرياضي</strong>، <strong>المكتبة</strong>، <strong>الكافتيريا</strong> (= العناوين، النصوص، الأزرار، الصور).<br><br>
            إذا <strong>أضافت المدرسة ناديًا جديدًا</strong>، يتم تحديث الهيكل. هذا بالضبط ما يفعله <strong><span class="term">JavaScript</span></strong> &mdash; يمكنه إضافة أو إزالة أو تغيير أي عنصر في شجرة <span class="term">DOM</span> <em>بدون إعادة بناء الهيكل بالكامل</em>.
        </div>
    </div>

    <div class="key-point">
        <h4>&#128161; كيف تعمل HTML وCSS وJavaScript مع DOM</h4>
        <p><strong><span class="term">HTML</span></strong> ينشئ الهيكل الشجري الأولي. <strong><span class="term">CSS</span></strong> ينسّق كل عنصر في الشجرة (الألوان، الأحجام، التخطيط). <strong><span class="term">JavaScript</span></strong> يمكنه تغيير الشجرة في أي وقت &mdash; إضافة عناصر جديدة، إزالة عناصر، أو تغيير المحتوى. لهذا تبدو المواقع الحديثة تفاعلية وحيّة!</p>
    </div>
</div>

<!-- ── Modern vs Old: No Page Reload ── -->
<div id="modern-no-reload" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128640;</div>
        <h2>تطبيقات الويب الحديثة لا تعيد تحميل الصفحة</h2>
    </div>

    <p>هذا أحد <strong>أكبر الفروقات</strong> بين المواقع القديمة وتطبيقات الويب الحديثة. فهم هذا هو المفتاح لفهم ما تراه في المختبر.</p>

    <!-- VISUALIZATION: Old vs New comparison -->
    <div class="oldnew-visual">
        <div class="oldnew-grid">
            <div class="oldnew-side">
                <div class="oldnew-label old">&#128220; الطريقة القديمة (قبل 10+ سنوات)</div>
                <div class="reload-demo">
                    <div class="reload-bar">
                        <div class="r-dot"></div>
                        <div class="r-dot"></div>
                        <div class="r-dot"></div>
                    </div>
                    <div class="reload-content old-flash">
                        <p style="font-size:0.9em; margin:0;"><strong>صفحة التسوق</strong></p>
                        <p style="font-size:0.8em; color:var(--gray); margin:4px 0;">تضغط "أضف للسلة"...</p>
                        <p style="font-size:0.85em; margin:4px 0;">&#128260; <strong>الصفحة كلها تُعاد تحميلها!</strong></p>
                        <p style="font-size:0.75em; color:var(--gray); margin:0;">وميض أبيض... تحميل... صفحة جديدة تظهر</p>
                        <span class="full-reload-badge">إعادة تحميل كاملة</span>
                    </div>
                </div>
                <p style="font-size:0.85em; color:var(--gray); margin-top:10px;">كل إجراء = المتصفح يحمّل <strong>الصفحة كاملة</strong> مرة أخرى من الخادم. بطيء!</p>
            </div>
            <div class="oldnew-side">
                <div class="oldnew-label new">&#128640; الطريقة الحديثة (اليوم)</div>
                <div class="reload-demo">
                    <div class="reload-bar">
                        <div class="r-dot"></div>
                        <div class="r-dot"></div>
                        <div class="r-dot"></div>
                    </div>
                    <div class="reload-content new-update">
                        <p style="font-size:0.9em; margin:0;"><strong>صفحة التسوق</strong></p>
                        <p style="font-size:0.8em; color:var(--gray); margin:4px 0;">تضغط "أضف للسلة"...</p>
                        <p style="font-size:0.85em; margin:4px 0;">السلة تتحدث: <span class="update-highlight">&#128722; عنصر واحد</span></p>
                        <p style="font-size:0.75em; color:var(--gray); margin:0;">فقط السلة تغيرت. الصفحة بقيت كما هي!</p>
                        <span class="no-reload-badge">لا حاجة لإعادة التحميل</span>
                    </div>
                </div>
                <p style="font-size:0.85em; color:var(--gray); margin-top:10px;"><span class="term">JavaScript</span> يرسل طلبًا صغيرًا في <strong>الخلفية</strong>، يستقبل <span class="term">JSON</span>، ويحدّث <strong>فقط</strong> الجزء الذي تغيّر. سريع!</p>
            </div>
        </div>
    </div>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة &mdash; تغذية أخبار أحمد</div>
        <p><strong>أحمد</strong> يفتح تطبيق تواصل اجتماعي. يمرر للأسفل و<strong>منشورات جديدة تظهر تلقائيًا</strong> بدون إعادة تحميل الصفحة. كيف؟</p>
        <div class="dialogue">
            <span class="character ahmed">ما يحدث خلف الكواليس:</span><br><br>
            1. أحمد يمرر إلى أسفل الصفحة.<br>
            2. <strong><span class="term">JavaScript</span></strong> يكتشف ذلك ويرسل <strong>طلبًا صغيرًا</strong> للخادم في الخلفية: <em>"أعطني الـ 10 منشورات التالية"</em><br>
            3. الخادم يرد ببيانات <strong><span class="term">JSON</span></strong> (فقط بيانات المنشورات، وليس صفحة كاملة).<br>
            4. <span class="term">JavaScript</span> يأخذ هذا الـ <span class="term">JSON</span> و<strong>يضيف عناصر منشورات جديدة إلى <span class="term">DOM</span></strong>.<br>
            5. أحمد يرى منشورات جديدة تظهر &mdash; <strong>بدون أي إعادة تحميل للصفحة!</strong>
        </div>
        <p>هذا يسمى <strong><span class="term">AJAX</span></strong> (<span class="term">Asynchronous JavaScript and XML</span>) &mdash; رغم أنه اليوم يستخدم <span class="term">JSON</span> وليس <span class="term">XML</span>. كلمة "غير متزامن" تعني فقط أنه يحدث <strong>في الخلفية</strong> بينما تستمر في استخدام الصفحة.</p>
    </div>

    <div class="key-point">
        <h4>&#128161; لماذا هذا مهم للمختبر؟</h4>
        <p>في المختبر 2، عندما تفتح <strong>أدوات المطور (<span class="term">F12</span>) &rarr; تبويب الشبكة</strong>، ترى هذه الطلبات الخلفية تحدث في الوقت الفعلي. كل مرة تضغط زرًا أو تحمّل محتوى جديدًا، <span class="term">JavaScript</span> يرسل طلبًا صغيرًا للخادم. <strong>هذه هي استدعاءات الـ <span class="term">API</span> التي تراقبها!</strong> الصفحة لا تُعاد تحميلها &mdash; لكن البيانات تتدفق خلف الكواليس.</p>
    </div>
</div>

<!-- ── SPA Frameworks ── -->
<div id="spa-frameworks" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128736;</div>
        <h2><span class="term">SPA</span> &mdash; تطبيقات الصفحة الواحدة</h2>
    </div>

    <p>أُطر العمل الحديثة مثل <strong><span class="term">Angular</span></strong> و<strong><span class="term">React</span></strong> و<strong><span class="term">Vue</span></strong> تأخذ فكرة "بدون إعادة تحميل" إلى أقصى حد. تبني ما نسميه <strong>تطبيق الصفحة الواحدة (<span class="term">SPA</span>)</strong>.</p>

    <p>لفهم الفرق حقًا، لنلقِ نظرة على <strong>إشارة مرور</strong>.</p>

    <!-- TRAFFIC LIGHT VISUALIZATION -->
    <div class="traffic-visual">
        <div class="traffic-grid">
            <!-- LEFT: Traditional -->
            <div class="traffic-side">
                <div class="traffic-side-label old">&#128220; موقع تقليدي</div>

                <div class="tl-file-tabs" id="trad-tabs">
                    <span class="tl-file-tab active red" id="trad-tab-red">red.html</span>
                    <span class="tl-file-tab" id="trad-tab-orange">orange.html</span>
                    <span class="tl-file-tab" id="trad-tab-green">green.html</span>
                </div>

                <div class="tl-browser tl-traditional">
                    <div class="tl-browser-bar">
                        <span class="tl-dot"></span>
                        <span class="tl-dot"></span>
                        <span class="tl-dot"></span>
                        <span class="tl-url" id="trad-url">traffic.com/red.html</span>
                    </div>
                    <div class="tl-browser-body" id="trad-body">
                        <div class="traffic-light">
                            <div class="tl-bulb red-on" id="trad-red"></div>
                            <div class="tl-bulb off" id="trad-orange"></div>
                            <div class="tl-bulb off" id="trad-green"></div>
                        </div>
                    </div>
                </div>

                <div class="tl-status reload" id="trad-status">&#128260; Loading red.html...</div>

                <p class="traffic-desc"><strong>3 صفحات HTML منفصلة.</strong><br>كل تغيير لون = إعادة تحميل كاملة.<br>الصورة <em>بالكامل</em> تُعاد تحميلها كل مرة!</p>
            </div>

            <!-- RIGHT: SPA -->
            <div class="traffic-side">
                <div class="traffic-side-label modern">&#128640; <span class="term">SPA</span> (صفحة واحدة)</div>

                <div class="tl-file-tabs">
                    <span class="tl-file-tab active" style="opacity:1; background:var(--ch3); color:white;">index.html</span>
                    <span class="tl-file-tab" style="opacity:0.5; font-style:italic;">واحدة فقط!</span>
                </div>

                <div class="tl-browser">
                    <div class="tl-browser-bar">
                        <span class="tl-dot"></span>
                        <span class="tl-dot"></span>
                        <span class="tl-dot"></span>
                        <span class="tl-url">traffic.com/index.html</span>
                    </div>
                    <div class="tl-browser-body">
                        <div class="traffic-light">
                            <div class="tl-bulb off" id="spa-red"></div>
                            <div class="tl-bulb off" id="spa-orange"></div>
                            <div class="tl-bulb off" id="spa-green"></div>
                        </div>
                    </div>
                </div>

                <div class="tl-status smooth" id="spa-status">&#9989; Just changing the color...</div>

                <p class="traffic-desc"><strong>صفحة واحدة فقط.</strong><br><span class="term">JavaScript</span> يغيّر <em>اللون فقط</em>.<br>بدون إعادة تحميل، بدون صفحة جديدة، فوري!</p>
            </div>
        </div>
    </div>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة &mdash; إشارة مرور أحمد</div>
        <p><strong>أحمد</strong> يبني تطبيق إشارة مرور لمشروع مدينة.</p>
        <div class="dialogue">
            <span class="character ahmed">الطريقة التقليدية:</span> أحمد يصنع <strong>ثلاث صفحات HTML</strong> &mdash; <code>red.html</code> و<code>orange.html</code> و<code>green.html</code>. كل صفحة فيها صورة إشارة المرور كاملة. لتغيير اللون من أحمر إلى أخضر، المتصفح يجب أن <strong>يتخلص من الصفحة كاملة</strong>، يذهب للخادم، يحمّل <strong>صفحة جديدة بالكامل</strong> بالضوء الأخضر. الصورة تُعاد تحميلها، كل شيء يُعاد تحميله. هدر!<br><br>
            <span class="character ahmed">طريقة <span class="term">SPA</span>:</span> أحمد يصنع <strong>صفحة واحدة</strong> &mdash; <code>index.html</code>. <span class="term">JavaScript</span> ببساطة يغيّر <strong>لون الضوء</strong> في نفس الصفحة. بدون إعادة تحميل، بدون صفحة جديدة من الخادم. فقط تغيير بضع بكسلات. <strong>فوري!</strong><br><br>
            <span class="character omar">عمر يقول:</span> "لماذا تعيد تحميل الصورة كاملة فقط لتغيير لون واحد؟ هذا مثل إعادة بناء سيارة كاملة فقط لإعادة طلائها!"
        </div>
        <p>هذا بالضبط كيف تعمل <strong>أُطر <span class="term">SPA</span></strong>. بدلًا من تحميل صفحات جديدة، <span class="term">JavaScript</span> يغيّر فقط الأجزاء التي تحتاج للتغيير.</p>
    </div>

    <div class="key-point">
        <h4>&#128161; الارتباط بالمختبر 2</h4>
        <p><strong><span class="term">OWASP Juice Shop</span></strong> مبني بـ<strong><span class="term">Angular</span></strong>، وهو إطار عمل <span class="term">SPA</span>. لهذا السبب:</p>
        <ul style="margin:8px 0 0 20px;">
            <li>ترى <code>&lt;app-root&gt;</code> في مصدر الصفحة &mdash; التطبيق كله يعيش داخل <strong>عنصر واحد</strong></li>
            <li>ملفات مثل <code>main.js</code> و<code>runtime.js</code> تحتوي على كل <span class="term">JavaScript</span> الذي يدير الصفحة</li>
            <li>عندما تتصفح <span class="term">Juice Shop</span>، <strong>الرابط يتغير لكن الصفحة لا تُعاد تحميلها أبدًا</strong> &mdash; تمامًا مثل إشارة المرور التي تغيّر ألوانها</li>
        </ul>
    </div>
</div>

<script>
// Traffic Light SPA Animation
(function() {
    const colors = ['red', 'orange', 'green'];
    const labels = {
        red: { url: 'traffic.com/red.html', status: '&#128260; جاري تحميل red.html...', file: 'trad-tab-red' },
        orange: { url: 'traffic.com/orange.html', status: '&#128260; جاري تحميل orange.html...', file: 'trad-tab-orange' },
        green: { url: 'traffic.com/green.html', status: '&#128260; جاري تحميل green.html...', file: 'trad-tab-green' }
    };
    const spaLabels = {
        red: '&#9989; تغيير اللون إلى أحمر...',
        orange: '&#9989; تغيير اللون إلى برتقالي...',
        green: '&#9989; تغيير اللون إلى أخضر...'
    };
    let step = 0;

    function updateLights() {
        const color = colors[step % 3];

        // --- Traditional side: flash and reload ---
        const tradBody = document.getElementById('trad-body');
        tradBody.style.opacity = '0';

        // Update tabs
        document.querySelectorAll('#trad-tabs .tl-file-tab').forEach(t => {
            t.classList.remove('active', 'red', 'orange', 'green');
        });
        const activeTab = document.getElementById(labels[color].file);
        activeTab.classList.add('active', color);

        setTimeout(() => {
            // Update traditional bulbs
            colors.forEach(c => {
                document.getElementById('trad-' + c).className = 'tl-bulb ' + (c === color ? c + '-on' : 'off');
            });
            document.getElementById('trad-url').textContent = labels[color].url;
            document.getElementById('trad-status').innerHTML = labels[color].status;
            tradBody.style.opacity = '1';
        }, 400);

        // --- SPA side: smooth change, no flash ---
        colors.forEach(c => {
            const bulb = document.getElementById('spa-' + c);
            bulb.className = 'tl-bulb ' + (c === color ? c + '-on' : 'off');
            bulb.style.transition = 'all 0.5s ease';
        });
        document.getElementById('spa-status').innerHTML = spaLabels[color];

        step++;
    }

    // Add transition to traditional body
    const tradBody = document.getElementById('trad-body');
    if (tradBody) {
        tradBody.style.transition = 'opacity 0.3s ease';
        updateLights();
        setInterval(updateLights, 2500);
    }
})();
</script>

<!-- ── REST API ── -->
<div id="rest-api" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128279;</div>
        <h2><span class="term">API</span> و<span class="term">HTTP</span> و<span class="term">REST API</span> (تعريف مبسط)</h2>
    </div>

    <p><strong><span class="term">API</span></strong> (<span class="term">Application Programming Interface</span>) هي مجموعة قواعد تسمح لبرنامج باستخدام بيانات أو خدمات من برنامج آخر دون معرفة كوده الداخلي.</p>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة &mdash; واجهة الطقس</div>
        <p>تخيل أن شركة بنت أجهزة استشعار طقس مكلفة في عدة مدن في المملكة العربية السعودية. تجمع بيانات الحرارة وتشغّل خوادم لمعالجتها.</p>
        <p>إذا كنت طالبًا تبني تطبيقًا صغيرًا، <strong>لا تحتاج</strong> لبناء أجهزة استشعار وبنية تحتية مرة أخرى. يمكنك الاشتراك في خدمتهم وقراءة بيانات الحرارة من خلال <strong><span class="term">API</span></strong> الخاصة بهم.</p>
        <div class="dialogue">
            تطبيقك يسأل: <strong>"أعطني درجة حرارة الرياض."</strong><br>
            خادمهم يرد بالبيانات: <strong>"42&deg;م"</strong>.
        </div>
    </div>

    <div class="api-bridge">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:16px;">كيف تساعدك <span class="term">API</span> في إعادة استخدام أنظمة أخرى</p>
        <div class="api-bridge-row">
            <div class="api-bridge-node">
                <div class="n-icon">&#127777;</div>
                <div class="n-title">نظام المزوّد</div>
                <div class="n-desc">أجهزة استشعار + خادم + قاعدة بيانات تجمع بيانات الطقس.</div>
            </div>
            <div class="api-bridge-arrow">&#10132;</div>
            <div class="api-bridge-node">
                <div class="n-icon">&#128279;</div>
                <div class="n-title">نقاط <span class="term">API</span></div>
                <div class="n-desc">واجهة واضحة لطلب البيانات باستخدام قواعد معيارية.</div>
            </div>
            <div class="api-bridge-arrow">&#10132;</div>
            <div class="api-bridge-node">
                <div class="n-icon">&#128241;</div>
                <div class="n-title">تطبيقك</div>
                <div class="n-desc">يستهلك البيانات مباشرة بدلًا من إعادة بناء النظام بالكامل.</div>
            </div>
        </div>
    </div>

    <h3>ما هو بروتوكول <span class="term">HTTP</span>؟</h3>
    <p><strong><span class="term">HTTP</span></strong> (<span class="term">HyperText Transfer Protocol</span>) هو معيار اتصالات الويب. يحدد كيف يرسل العميل طلبًا وكيف يعيد الخادم استجابة.</p>

    <table class="method-table">
        <thead>
            <tr>
                <th>جزء <span class="term">HTTP</span></th>
                <th>المعنى</th>
                <th>مثال بسيط</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>الطريقة (<span class="term">Method</span>)</strong></td>
                <td>ما الإجراء المطلوب</td>
                <td><code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code></td>
            </tr>
            <tr>
                <td><strong>الرابط / النقطة (<span class="term">URL / Endpoint</span>)</strong></td>
                <td>أي مورد مستهدف</td>
                <td><code>/cities/riyadh/weather</code></td>
            </tr>
            <tr>
                <td><strong>الترويسات (<span class="term">Headers</span>)</strong></td>
                <td>بيانات وصفية إضافية</td>
                <td><code>Authorization</code>, <code>Content-Type</code></td>
            </tr>
            <tr>
                <td><strong>الجسم (<span class="term">Body</span>)</strong></td>
                <td>البيانات المرسلة مع الطلب</td>
                <td>حمولة <span class="term">JSON</span> (عادة مع <code>POST</code>/<code>PUT</code>)</td>
            </tr>
            <tr>
                <td><strong>رمز الحالة (<span class="term">Status Code</span>)</strong></td>
                <td>نتيجة الخادم للطلب</td>
                <td><code>200</code> نجاح، <code>404</code> غير موجود، <code>500</code> خطأ في الخادم</td>
            </tr>
        </tbody>
    </table>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; مثال على طلب واستجابة <span class="term">HTTP</span></div>
        <div class="json-box">
<span class="c">Request</span><br>
GET /cities/riyadh/weather HTTP/1.1<br>
Host: api.weather-example.com<br>
Authorization: Bearer YOUR_TOKEN<br><br>

<span class="c">Response</span><br>
HTTP/1.1 200 OK<br>
Content-Type: application/json<br><br>
{<br>
&nbsp;&nbsp;<span class="k">"city"</span>: <span class="s">"Riyadh"</span>,<br>
&nbsp;&nbsp;<span class="k">"temp_c"</span>: <span class="n">42</span><br>
}
        </div>
    </div>

    <h3>إذًا، ما هي <span class="term">REST API</span>؟</h3>
    <p><strong><span class="term">REST API</span></strong> هي أسلوب تصميم واجهات يستخدم <span class="term">HTTP</span> وينظم بيانات النظام كـ<strong>موارد</strong> (مثل المستخدمين، الطلبات، المنتجات، المدن).</p>

    <ul class="clean-list ch3">
        <li>كل مورد له رابط <span class="term">URL</span> (مثال: <code>/cities/riyadh/weather</code>)</li>
        <li>العميل يستخدم طرق <span class="term">HTTP</span> للتفاعل مع ذلك المورد</li>
        <li>الخادم يرد برموز حالة وعادة بيانات <span class="term">JSON</span></li>
    </ul>

    <div class="key-point">
        <h4>&#128161; تعريف مبسط للطلاب</h4>
        <p><strong><span class="term">REST API</span> هي طريقة للتواصل بين تطبيقات العميل والخادم عبر <span class="term">HTTP</span> باستخدام روابط الموارد وطرق معيارية مثل <span class="term">GET</span> و<span class="term">POST</span> و<span class="term">PUT</span> و<span class="term">DELETE</span>.</strong></p>
    </div>

    <h3>طرق <span class="term">HTTP</span> في العمل</h3>

    <!-- VISUALIZATION: Interactive HTTP Methods Demo -->
    <div class="http-demo">
        <p style="font-weight:700; color:var(--dark); margin-bottom:14px;">اضغط على كل طريقة لرؤيتها في العمل:</p>

        <div class="http-tabs">
            <button class="http-tab active" data-m="get" onclick="showMethod('get')">
                <span class="badge get">GET</span> عرض القائمة
            </button>
            <button class="http-tab" data-m="post" onclick="showMethod('post')">
                <span class="badge post">POST</span> إنشاء طلب
            </button>
            <button class="http-tab" data-m="put" onclick="showMethod('put')">
                <span class="badge put">PUT</span> تعديل الطلب
            </button>
            <button class="http-tab" data-m="delete" onclick="showMethod('delete')">
                <span class="badge delete">DELETE</span> إلغاء
            </button>
        </div>

        <!-- GET Scene -->
        <div class="http-scene active" id="scene-get">
            <div class="scene-header get">GET /menu &mdash; "أرني ما هو متاح"</div>
            <div class="scene-body">
                <div class="scene-col">
                    <div class="scene-col-label">&#128241; أحمد يرسل:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#128100;</div>
                        <p><strong>"أريد رؤية القائمة!"</strong></p>
                        <p style="font-size:0.88em; color:var(--gray);">لا حاجة لبيانات &mdash; فقط طلب <em>قراءة</em> معلومات.</p>
                    </div>
                </div>
                <div class="scene-arrow-col">
                    <div class="scene-arrow-animated to-server">&#10132;</div>
                    <div class="scene-arrow-animated to-client">&#10132;</div>
                </div>
                <div class="scene-col">
                    <div class="scene-col-label">&#128451; الخادم يرد:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#127828;</div>
                        <div class="json-box" style="margin:0; font-size:0.85em; padding:14px;">
[<br>
&nbsp;&nbsp;{ <span class="k">"id"</span>: <span class="n">1</span>, <span class="k">"name"</span>: <span class="s">"Pizza"</span> },<br>
&nbsp;&nbsp;{ <span class="k">"id"</span>: <span class="n">2</span>, <span class="k">"name"</span>: <span class="s">"Salad"</span> },<br>
&nbsp;&nbsp;{ <span class="k">"id"</span>: <span class="n">3</span>, <span class="k">"name"</span>: <span class="s">"Pasta"</span> }<br>
]
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- POST Scene -->
        <div class="http-scene" id="scene-post">
            <div class="scene-header post">POST /orders &mdash; "أريد إنشاء طلب جديد"</div>
            <div class="scene-body">
                <div class="scene-col">
                    <div class="scene-col-label">&#128241; أحمد يرسل:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#128100;</div>
                        <div class="json-box" style="margin:0; font-size:0.85em; padding:14px;">
{<br>
&nbsp;&nbsp;<span class="k">"item"</span>: <span class="s">"Pizza"</span>,<br>
&nbsp;&nbsp;<span class="k">"quantity"</span>: <span class="n">1</span>,<br>
&nbsp;&nbsp;<span class="k">"customer"</span>: <span class="s">"Ahmed"</span><br>
}
                        </div>
                    </div>
                </div>
                <div class="scene-arrow-col">
                    <div class="scene-arrow-animated to-server">&#10132;</div>
                    <div class="scene-arrow-animated to-client">&#10132;</div>
                </div>
                <div class="scene-col">
                    <div class="scene-col-label">&#128451; الخادم يرد:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#9989;</div>
                        <div class="json-box" style="margin:0; font-size:0.85em; padding:14px;">
{<br>
&nbsp;&nbsp;<span class="k">"order_id"</span>: <span class="n">101</span>,<br>
&nbsp;&nbsp;<span class="k">"status"</span>: <span class="s">"Created!"</span><br>
}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PUT Scene -->
        <div class="http-scene" id="scene-put">
            <div class="scene-header put">PUT /orders/101 &mdash; "أريد تعديل طلبي"</div>
            <div class="scene-body">
                <div class="scene-col">
                    <div class="scene-col-label">&#128241; أحمد يرسل:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#128100;</div>
                        <div class="json-box" style="margin:0; font-size:0.85em; padding:14px;">
{<br>
&nbsp;&nbsp;<span class="k">"items"</span>: [<span class="s">"Pizza"</span>, <span class="s">"Salad"</span>],<br>
&nbsp;&nbsp;<span class="k">"customer"</span>: <span class="s">"Ahmed"</span><br>
}
                        </div>
                        <p style="font-size:0.82em; color:var(--put); margin-top:8px; font-weight:600;">يجب إرسال الطلب الكامل مرة أخرى (بيتزا + سلطة)</p>
                    </div>
                </div>
                <div class="scene-arrow-col">
                    <div class="scene-arrow-animated to-server">&#10132;</div>
                    <div class="scene-arrow-animated to-client">&#10132;</div>
                </div>
                <div class="scene-col">
                    <div class="scene-col-label">&#128451; الخادم يرد:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#9989;</div>
                        <div class="json-box" style="margin:0; font-size:0.85em; padding:14px;">
{<br>
&nbsp;&nbsp;<span class="k">"order_id"</span>: <span class="n">101</span>,<br>
&nbsp;&nbsp;<span class="k">"status"</span>: <span class="s">"Updated!"</span><br>
}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DELETE Scene -->
        <div class="http-scene" id="scene-delete">
            <div class="scene-header delete">DELETE /orders/101 &mdash; "ألغِ طلبي"</div>
            <div class="scene-body">
                <div class="scene-col">
                    <div class="scene-col-label">&#128241; أحمد يرسل:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#128100;</div>
                        <p><strong>"ألغِ الطلب #101"</strong></p>
                        <p style="font-size:0.88em; color:var(--gray);">لا حاجة لبيانات &mdash; الرابط <code>/orders/101</code> يخبر الخادم بالفعل <em>ماذا</em> يحذف.</p>
                    </div>
                </div>
                <div class="scene-arrow-col">
                    <div class="scene-arrow-animated to-server">&#10132;</div>
                    <div class="scene-arrow-animated to-client">&#10132;</div>
                </div>
                <div class="scene-col">
                    <div class="scene-col-label">&#128451; الخادم يرد:</div>
                    <div class="scene-card">
                        <div class="scene-emoji">&#128465;</div>
                        <div class="json-box" style="margin:0; font-size:0.85em; padding:14px;">
{<br>
&nbsp;&nbsp;<span class="k">"order_id"</span>: <span class="n">101</span>,<br>
&nbsp;&nbsp;<span class="k">"status"</span>: <span class="s">"Cancelled"</span><br>
}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="key-point">
        <h4>&#128161; مفهوم أساسي: عديم الحالة (<span class="term">Stateless</span>)</h4>
        <p>واجهات <span class="term">REST API</span> <strong>عديمة الحالة</strong> &mdash; الخادم لا يتذكر طلباتك السابقة. كل طلب يجب أن يتضمن <em>جميع</em> المعلومات. مثل نادل ينساك بعد كل زيارة &mdash; يجب أن تقول طلبك الكامل في كل مرة.</p>
    </div>
</div>

<!-- ── JSON ── -->
<div id="json-data" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128230;</div>
        <h2><span class="term">JSON</span> &mdash; لغة البيانات</h2>
    </div>

    <p>عندما يتبادل العميل والخادم الرسائل، يستخدمان <strong><span class="term">JSON</span></strong> (<span class="term">JavaScript Object Notation</span>) &mdash; طريقة بسيطة لتنظيم البيانات.</p>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة &mdash; بطاقة هوية أحمد</div>
        <p>فكّر في <span class="term">JSON</span> مثل بطاقة هوية منظمة بعناية:</p>
        <div class="json-box">
{<br>
&nbsp;&nbsp;<span class="k">"name"</span>: <span class="s">"Ahmed Al-Rashid"</span>,<br>
&nbsp;&nbsp;<span class="k">"age"</span>: <span class="n">22</span>,<br>
&nbsp;&nbsp;<span class="k">"email"</span>: <span class="s">"ahmed@email.com"</span>,<br>
&nbsp;&nbsp;<span class="k">"program"</span>: <span class="s">"Cybersecurity Diploma"</span>,<br>
&nbsp;&nbsp;<span class="k">"courses"</span>: [<span class="s">"CYB236"</span>, <span class="s">"CYB240"</span>, <span class="s">"NET201"</span>]<br>
}
        </div>
        <p><strong>المفاتيح</strong> (التسميات على اليمين) + <strong>القيم</strong> (البيانات على اليسار) = <span class="term">JSON</span>!</p>
    </div>

    <div class="map-grid" style="grid-template-columns: repeat(4, 1fr);">
        <div class="map-card">
            <div class="mc-icon">&#9889;</div>
            <div class="mc-title">خفيفة الوزن</div>
            <div class="mc-desc">صغيرة وسريعة الإرسال</div>
        </div>
        <div class="map-card">
            <div class="mc-icon">&#128064;</div>
            <div class="mc-title">مقروءة</div>
            <div class="mc-desc">البشر يمكنهم فهمها</div>
        </div>
        <div class="map-card">
            <div class="mc-icon">&#127907;</div>
            <div class="mc-title">منظمة</div>
            <div class="mc-desc">بيانات داخل بيانات</div>
        </div>
        <div class="map-card">
            <div class="mc-icon">&#127758;</div>
            <div class="mc-title">عالمية</div>
            <div class="mc-desc">جميع المتصفحات تدعمها</div>
        </div>
    </div>
</div>

<!-- ── Technology Stack ── -->
<div id="technology-stack" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128738;</div>
        <h2>الحزمة التقنية</h2>
    </div>

    <p>تطبيق الويب مبني من <strong>طبقات تقنية</strong> مرصوصة مثل طوابق المبنى:</p>

    <!-- VISUALIZATION: Animated Technology Stack -->
    <div class="stack-visual">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:20px; font-size:1.1em;">شاهد الحزمة تُبنى (من الأسفل للأعلى)</p>
        <div class="stack-tower">
            <div class="stack-layer l1">
                <span class="stack-emoji">&#128187;</span>
                <div class="stack-text">
                    <strong>نظام التشغيل (<span class="term">Linux</span>)</strong>
                    <span>الأساس الذي يعمل عليه كل شيء</span>
                </div>
                <span class="stack-analogy">&#127959; الأساس</span>
            </div>
            <div class="stack-layer l2">
                <span class="stack-emoji">&#128451;</span>
                <div class="stack-text">
                    <strong>خادم الويب (<span class="term">Apache</span>, <span class="term">Nginx</span>)</strong>
                    <span>يستمع للطلبات ويرسل الاستجابات</span>
                </div>
                <span class="stack-analogy">&#129521; الجدران والسقف</span>
            </div>
            <div class="stack-layer l3">
                <span class="stack-emoji">&#128190;</span>
                <div class="stack-text">
                    <strong>قاعدة البيانات (<span class="term">MySQL</span>, <span class="term">MongoDB</span>)</strong>
                    <span>تخزّن جميع البيانات بشكل دائم</span>
                </div>
                <span class="stack-analogy">&#128161; الكهرباء</span>
            </div>
            <div class="stack-layer l4">
                <span class="stack-emoji">&#128279;</span>
                <div class="stack-text">
                    <strong><span class="term">REST API</span> + <span class="term">JSON</span></strong>
                    <span>التواصل بين العميل والخادم</span>
                </div>
                <span class="stack-analogy">&#128682; الأبواب</span>
            </div>
            <div class="stack-layer l5">
                <span class="stack-emoji">&#127912;</span>
                <div class="stack-text">
                    <strong>إطار الواجهة (<span class="term">Angular</span>, <span class="term">React</span>)</strong>
                    <span>واجهة المستخدم التي تراها في المتصفح</span>
                </div>
                <span class="stack-analogy">&#128444; التصميم الداخلي</span>
            </div>
        </div>
        <p style="text-align:center; color:var(--gray); font-size:0.85em; margin-top:16px;">مثل عمر الذي يبني منزلًا &mdash; كل طبقة تعتمد على التي أسفلها!</p>
    </div>
</div>

<!-- ── Authentication vs Authorization ── -->
<div id="auth-vs-authz" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128272;</div>
        <h2>المصادقة مقابل التفويض</h2>
    </div>

    <div class="compare-grid">
        <div class="compare-card" style="border-color: var(--ch2);">
            <h4>&#128272; المصادقة (<span class="term">Authentication</span>) = "من أنت؟"</h4>
            <p>إثبات هويتك. مثال: إدخال اسم المستخدم وكلمة المرور.</p>
        </div>
        <div class="compare-card" style="border-color: var(--ch3);">
            <h4>&#128274; التفويض (<span class="term">Authorization</span>) = "ماذا يمكنك فعله؟"</h4>
            <p>التحقق من صلاحياتك. مثال: هل يمكنك الوصول لإعدادات المدير؟</p>
        </div>
    </div>

    <!-- VISUALIZATION: Auth Flow Animation -->
    <div class="auth-flow">
        <p style="text-align:center; font-weight:700; color:var(--dark); margin-bottom:20px; font-size:1.1em;">أحمد وعمر في حفل موسيقي</p>
        <div class="auth-stages">
            <div class="auth-stage">
                <div class="auth-stage-header authn">الخطوة 1: المصادقة (عند البوابة)</div>
                <div class="auth-stage-body">
                    <p style="font-size:0.9em; color:var(--gray); margin-bottom:12px;">"أرني هويتك وتذكرتك"</p>
                    <div class="auth-person pass">
                        <span class="auth-person-emoji">&#128100;</span>
                        <div>
                            <strong>أحمد</strong><br>
                            <span style="font-size:0.85em;">يُظهر الهوية + تذكرة عادية &#127915;</span>
                        </div>
                        <span class="auth-result yes">&#10003; تم التحقق</span>
                    </div>
                    <div class="auth-person pass">
                        <span class="auth-person-emoji">&#128110;</span>
                        <div>
                            <strong>عمر</strong><br>
                            <span style="font-size:0.85em;">يُظهر الهوية + تذكرة VIP &#11088;</span>
                        </div>
                        <span class="auth-result yes">&#10003; تم التحقق</span>
                    </div>
                </div>
            </div>
            <div class="auth-stage">
                <div class="auth-stage-header authz">الخطوة 2: التفويض (صالة VIP)</div>
                <div class="auth-stage-body">
                    <p style="font-size:0.9em; color:var(--gray); margin-bottom:12px;">"هل يمكنك دخول منطقة VIP؟"</p>
                    <div class="auth-person fail">
                        <span class="auth-person-emoji">&#128100;</span>
                        <div>
                            <strong>أحمد</strong><br>
                            <span style="font-size:0.85em;">تذكرة عادية &mdash; لا وصول VIP</span>
                        </div>
                        <span class="auth-result no">&#10007; مرفوض</span>
                    </div>
                    <div class="auth-person pass">
                        <span class="auth-person-emoji">&#128110;</span>
                        <div>
                            <strong>عمر</strong><br>
                            <span style="font-size:0.85em;">تذكرة VIP &mdash; أهلًا وسهلًا!</span>
                        </div>
                        <span class="auth-result yes">&#10003; مسموح</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="key-point">
        <h4>&#128161; رؤية أمنية</h4>
        <p>كثير من الثغرات تحدث عندما يقوم التطبيق <strong>بمصادقة</strong> المستخدم بشكل صحيح لكن <strong>يفشل في التحقق من التفويض</strong>. مثال: أحمد يصل لصور عمر الخاصة بتغيير رقم في الرابط &mdash; هذه ثغرة <strong>تفويض مكسور</strong>.</p>
    </div>
</div>

<!-- ── Client-Side Storage ── -->
<div id="client-storage" class="topic">
    <div class="topic-header">
        <div class="topic-icon ch3">&#128451;</div>
        <h2>التخزين في المتصفح (البيانات في متصفحك)</h2>
    </div>

    <p>متصفحك يمكنه تخزين قطع صغيرة من البيانات محليًا. فكّر فيها كـ<strong>ثلاثة أنواع من الخزائن</strong>:</p>

    <!-- VISUALIZATION: Animated Storage Lockers -->
    <div class="lockers-visual">
        <div class="lockers-row">
            <div class="locker">
                <div class="locker-top">
                    &#127850;
                    <span class="lock-icon">&#128274;</span>
                </div>
                <div class="locker-body">
                    <div class="locker-name"><span class="term">Cookies</span></div>
                    <div class="locker-time">حتى تاريخ الانتهاء</div>
                    <div class="locker-desc">ملصقات صغيرة يقرأها الخادم مع كل طلب. يمكن أن يكون لها تاريخ انتهاء. تُستخدم لرموز الجلسة.</div>
                </div>
            </div>
            <div class="locker">
                <div class="locker-top">
                    &#128451;
                    <span class="lock-icon">&#128274;</span>
                </div>
                <div class="locker-body">
                    <div class="locker-name"><span class="term">Local Storage</span></div>
                    <div class="locker-time">دائم</div>
                    <div class="locker-desc">مثل <strong>خزانة دائمة</strong>. البيانات تبقى حتى بعد إغلاق المتصفح. مناسبة للإعدادات والبيانات المخزنة مؤقتًا.</div>
                </div>
            </div>
            <div class="locker">
                <div class="locker-top">
                    &#9203;
                    <span class="lock-icon">&#128275;</span>
                </div>
                <div class="locker-body">
                    <div class="locker-name"><span class="term">Session Storage</span></div>
                    <div class="locker-time">حتى إغلاق التبويب</div>
                    <div class="locker-desc">مثل <strong>خزانة يومية</strong>. البيانات تختفي عند إغلاق تبويب المتصفح. مناسبة للبيانات المؤقتة.</div>
                </div>
            </div>
        </div>
    </div>

    <div class="story ch3">
        <div class="story-label ch3">&#128214; وقت القصة &mdash; خزائن أحمد في الكلية</div>
        <p><strong>أحمد</strong> لديه ثلاث خزائن في الكلية:</p>
        <div class="dialogue">
            <span class="character ahmed">الخزانة الدائمة (<span class="term">Local Storage</span>):</span> كتبه تبقى فيها طوال الفصل الدراسي. حتى لو ذهب للمنزل، الكتب ستكون موجودة غدًا.<br><br>
            <span class="character ahmed">الخزانة اليومية (<span class="term">Session Storage</span>):</span> يستخدمها ليوم واحد فقط. عندما يغادر الحرم الجامعي، تُفرَّغ تلقائيًا.<br><br>
            <span class="character ahmed">بطاقة الاسم (<span class="term">Cookies</span>):</span> بطاقة صغيرة يلبسها تقرأها المدرسة كل مرة يدخل فيها غرفة. عليها تاريخ انتهاء مطبوع.
        </div>
    </div>

    <div class="warning">
        <h4>&#9888;&#65039; ملاحظة أمنية</h4>
        <p>في التطبيقات المصممة بشكل سيئ، بيانات حساسة مثل <strong>كلمات المرور أو الرموز</strong> قد تُخزَّن في تخزين المتصفح بدون حماية. تحقق دائمًا من البيانات التي يخزنها المتصفح &mdash; هذا جزء من استطلاعك!</p>
    </div>
</div>

<!-- ── Chapter 3 Summary ── -->
<div id="chapter-3-summary" class="summary-banner ch3">
    <h3>&#10003; ملخص الفصل 3</h3>
    <ul>
        <li>تطبيقات الويب الحديثة لها جزآن: <strong>العميل</strong> (المتصفح) و<strong>الخادم</strong> (مركز البيانات)</li>
        <li>يتواصلان من خلال <strong><span class="term">REST APIs</span></strong> باستخدام طرق <span class="term">HTTP</span>: <span class="term">GET</span>، <span class="term">POST</span>، <span class="term">PUT</span>، <span class="term">DELETE</span></li>
        <li>البيانات تُتبادل بصيغة <strong><span class="term">JSON</span></strong> &mdash; خفيفة وسهلة القراءة</li>
        <li>واجهات <span class="term">REST API</span> <strong>عديمة الحالة</strong> &mdash; كل طلب يجب أن يحمل جميع المعلومات الضرورية</li>
        <li><strong>المصادقة</strong> = إثبات من أنت &nbsp;|&nbsp; <strong>التفويض</strong> = ما يُسمح لك بفعله</li>
        <li><strong>الحزمة التقنية</strong> تشمل: نظام التشغيل، خادم الويب، قاعدة البيانات، الـ <span class="term">API</span>، إطار الواجهة</li>
        <li>المتصفحات تخزن البيانات في <strong><span class="term">Cookies</span> و<span class="term">Local Storage</span> و<span class="term">Session Storage</span></strong></li>
        <li>كل طبقة في الحزمة يمكن أن تحتوي على نقاط ضعف أمنية</li>
    </ul>
</div>

</main>
</div><!-- end main-layout -->
</div><!-- end container -->

<!-- ══════════════════════ FOOTER ══════════════════════ -->
<footer class="footer">
    <div class="footer-inner">
        <div class="footer-brand">CYB 236: أمن تطبيقات الويب</div>
        <div class="footer-links">
            <a href="../index.html">الصفحة الرئيسية</a>
            <a href="../syllabus.html">الخطة الدراسية</a>
            <a href="index.html">الأسبوع 2</a>
        </div>
    </div>
    <div style="max-width: 1400px; margin: 24px auto 0; padding-top: 24px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 14px; color: var(--neutral-400); line-height: 1.8;">
        جامعة الملك عبدالعزيز &mdash; كلية الحاسبات وتقنية المعلومات<br>
        الدبلوم المتوسط العام في الأمن السيبراني<br>
        إعداد: د. عبدالمحسن المعلوي<br>
        آخر تحديث: 13 فبراير 2026
    </div>
</footer>

<!-- ══════════════════════ JAVASCRIPT ══════════════════════ -->
<script>
function showMethod(method) {
    // Hide all scenes
    document.querySelectorAll('.http-scene').forEach(function(s) {
        s.classList.remove('active');
    });
    // Deactivate all tabs
    document.querySelectorAll('.http-tab').forEach(function(t) {
        t.classList.remove('active');
    });
    // Show selected
    document.getElementById('scene-' + method).classList.add('active');
    document.querySelector('.http-tab[data-m="' + method + '"]').classList.add('active');
}

// Sidebar behavior (same pattern as week1)
(function () {
    const sidebarLinks = Array.from(document.querySelectorAll('.sidebar-link'));
    if (!sidebarLinks.length) return;

    sidebarLinks.forEach((link) => {
        link.addEventListener('click', function (event) {
            const href = this.getAttribute('href');
            if (!href || !href.startsWith('#')) return;
            const target = document.querySelector(href);
            if (!target) return;
            event.preventDefault();
            const topOffset = 90;
            const top = target.getBoundingClientRect().top + window.scrollY - topOffset;
            window.scrollTo({ top, behavior: 'smooth' });
        });
    });

    const targets = sidebarLinks
        .map((link) => document.querySelector(link.getAttribute('href')))
        .filter(Boolean);

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                const id = entry.target.getAttribute('id');
                sidebarLinks.forEach((link) => {
                    link.classList.toggle('active', link.getAttribute('href') === '#' + id);
                });
            }
        });
    }, {
        rootMargin: '-20% 0px -65% 0px',
        threshold: 0
    });

    targets.forEach((section) => observer.observe(section));
})();
</script>

</body>
</html>
